(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{2307:function(e,t,s){Promise.resolve().then(s.bind(s,7531))},7531:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(7437),r=s(2265),n=s(9376),i=s(3208),c=s(8349),l=s(3247),o=s(3774),d=s(1769);let u=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var x=s(6595),h=s(2369),m=s(1723),y=s(2208);let p=()=>{let e=(0,n.useSearchParams)(),t=(0,n.useRouter)(),[s,p]=(0,r.useState)(e.get("q")||""),[g,f]=(0,r.useState)(e.get("type")||"all"),[v,j]=(0,r.useState)({attractions:[],guides:[],total:0}),[b,N]=(0,r.useState)([]),[w,k]=(0,r.useState)(!1),[Z,S]=(0,r.useState)(!1),z=(0,r.useRef)(null);(0,r.useEffect)(()=>{let t=e.get("q");t&&(p(t),M(t,g))},[e]);let M=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(e.trim()){k(!0);try{let s=new URLSearchParams({q:e,type:t,limit:"20"}),a=await fetch("/api/search?".concat(s)),r=await a.json();j(r.results),N(r.suggestions||[])}catch(e){console.error("Search error:",e)}k(!1)}},A=e=>{p(e.text),S(!1);let s=new URLSearchParams;s.set("q",e.text),"attraction"===e.type&&s.set("type","attractions"),"category"===e.type&&s.set("type","guides"),t.push("/search?".concat(s.toString()))},P=e=>"attraction"===e.type?"/attractions/".concat(e._id):"/guides/".concat(e._id),C=e=>{var t,s,a,r;return"attraction"===e.type?(null===(t=e.name)||void 0===t?void 0:t.en)||(null===(s=e.name)||void 0===s?void 0:s.zh):(null===(a=e.title)||void 0===a?void 0:a.en)||(null===(r=e.title)||void 0===r?void 0:r.zh)},q=e=>{var t,s,a,r;return"attraction"===e.type?(null===(t=e.description)||void 0===t?void 0:t.en)||(null===(s=e.description)||void 0===s?void 0:s.zh):(null===(a=e.excerpt)||void 0===a?void 0:a.en)||(null===(r=e.excerpt)||void 0===r?void 0:r.zh)},L=e=>{var t;return"attraction"===e.type?null===(t=e.images)||void 0===t?void 0:t[0]:e.coverImage};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(i.Z,{}),(0,a.jsxs)("main",{className:"pt-16",children:[(0,a.jsx)("section",{className:"bg-white border-b border-gray-200 py-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:"Search China Travel"}),(0,a.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),!s.trim())return;let a=new URLSearchParams;a.set("q",s),"all"!==g&&a.set("type",g),t.push("/search?".concat(a.toString())),S(!1)},className:"relative",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{ref:z,type:"text",value:s,onChange:e=>p(e.target.value),onFocus:()=>{b.length>0&&S(!0)},placeholder:"Search for attractions, guides, cities...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-lg"}),Z&&b.length>0&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 font-medium mb-2",children:"Suggestions"}),b.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>A(e),className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded flex items-center space-x-2",children:["attraction"===e.type&&(0,a.jsx)(o.Z,{className:"h-4 w-4 text-gray-400"}),"city"===e.type&&(0,a.jsx)(o.Z,{className:"h-4 w-4 text-blue-500"}),"category"===e.type&&(0,a.jsx)(d.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("span",{className:"text-sm",children:e.text}),(0,a.jsx)("span",{className:"text-xs text-gray-400 capitalize",children:e.type})]},t))]})})]}),(0,a.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"attractions",children:"Attractions"}),(0,a.jsx)("option",{value:"guides",children:"Guides"})]}),(0,a.jsxs)("button",{type:"submit",disabled:w,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors",children:[w?(0,a.jsx)(u,{className:"h-5 w-5 animate-spin"}):(0,a.jsx)(l.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Search"})]})]})})]})})}),(0,a.jsx)("section",{className:"py-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(u,{className:"h-12 w-12 animate-spin text-red-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Searching..."})]})}):s&&v.total>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("p",{className:"text-gray-600",children:["Found ",(0,a.jsx)("span",{className:"font-semibold",children:v.total}),' results for "',(0,a.jsx)("span",{className:"font-semibold",children:s}),'"']})}),(0,a.jsxs)("div",{className:"flex space-x-1 mb-8 bg-gray-100 rounded-lg p-1 max-w-md",children:[(0,a.jsxs)("button",{onClick:()=>f("all"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("all"===g?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:["All (",v.total,")"]}),(0,a.jsxs)("button",{onClick:()=>f("attractions"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("attractions"===g?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:["Attractions (",v.attractions.length,")"]}),(0,a.jsxs)("button",{onClick:()=>f("guides"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("guides"===g?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:["Guides (",v.guides.length,")"]})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[("all"===g||"attractions"===g)&&v.attractions.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 mr-2 text-red-600"}),"Attractions (",v.attractions.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.attractions.map(e=>{var t;return(0,a.jsxs)("a",{href:P(e),className:"group bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[(0,a.jsx)("div",{className:"aspect-video overflow-hidden",children:(0,a.jsx)("img",{src:L(e),alt:C(e),className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 group-hover:text-red-600 transition-colors",children:C(e)}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:q(e)}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:null===(t=e.location)||void 0===t?void 0:t.city})]}),e.rating&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 text-yellow-500 fill-current"}),(0,a.jsx)("span",{children:e.rating})]})]})]})]},e._id)})})]}),("all"===g||"guides"===g)&&v.guides.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Travel Guides (",v.guides.length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:v.guides.map(e=>(0,a.jsx)("a",{href:P(e),className:"group block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"md:flex",children:[(0,a.jsx)("div",{className:"md:w-1/4",children:(0,a.jsx)("div",{className:"aspect-video md:aspect-square overflow-hidden",children:(0,a.jsx)("img",{src:L(e),alt:C(e),className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})})}),(0,a.jsx)("div",{className:"md:w-3/4 p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:C(e)}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:q(e)}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.author&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(h.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.author.name})]}),e.readTime&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.readTime," min read"]})]}),e.views&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.views.toLocaleString()})]})]})]}),(0,a.jsx)("span",{className:"ml-4 bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium capitalize",children:e.category.replace("-"," ")})]})})]})},e._id))})]})]})]}):s&&0===v.total?(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(l.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No results found"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["We couldn't find anything matching \"",s,'". Try different keywords or browse our categories.']}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)("a",{href:"/attractions",className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Browse Attractions"}),(0,a.jsx)("a",{href:"/guides",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Browse Guides"})]})]}):(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(l.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Start your search"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Discover amazing attractions and travel guides across China"})]})})})]}),(0,a.jsx)(c.Z,{})]})};var g=()=>(0,a.jsx)(r.Suspense,{fallback:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(i.Z,{}),(0,a.jsx)("div",{className:"pt-16 flex items-center justify-center h-64",children:(0,a.jsx)(u,{className:"h-12 w-12 animate-spin text-red-600"})}),(0,a.jsx)(c.Z,{})]}),children:(0,a.jsx)(p,{})})},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{color:c="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:d,children:u,...x}=s;return(0,a.createElement)("svg",{ref:i,...r,width:l,height:l,stroke:c,strokeWidth:d?24*Number(o)/Number(l):o,className:"lucide lucide-".concat(n(e)),...x},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...(Array.isArray(u)?u:[u])||[]])});return s.displayName="".concat(e),s}},1769:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7769:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9219:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},9202:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},7760:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},6337:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},9345:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8293:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3041:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6595:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},2351:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4767:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[605,484,971,117,744],function(){return e(e.s=2307)}),_N_E=e.O()}]);