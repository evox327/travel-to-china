(()=>{var e={};e.id=125,e.ids=[125],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},93349:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c}),a(43086),a(88242),a(35866);var r=a(23191),s=a(88716),i=a(37922),l=a.n(i),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let c=["",{children:["admin",{children:["attractions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,43086)),"/Users/luxiang/Cursor/AI-project/travel-to-china/app/admin/attractions/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,88242)),"/Users/luxiang/Cursor/AI-project/travel-to-china/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/luxiang/Cursor/AI-project/travel-to-china/app/admin/attractions/page.tsx"],x="/admin/attractions/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/attractions/page",pathname:"/admin/attractions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},37568:(e,t,a)=>{Promise.resolve().then(a.bind(a,78369))},78369:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(10326),s=a(17577),i=a(9223),l=a(76557);let n=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var d=a(88307),c=a(77636),o=a(33734),x=a(37358),m=a(12714);let h=(0,l.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),u=(0,l.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),p=()=>{let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!0),[p,g]=(0,s.useState)(""),[y,b]=(0,s.useState)("all"),[v,f]=(0,s.useState)("all"),[j,N]=(0,s.useState)(1),[w,k]=(0,s.useState)(1);(0,s.useEffect)(()=>{A()},[j,y,v,p]);let A=async()=>{l(!0);try{let e=new URLSearchParams({page:j.toString(),limit:"10"});"all"!==y&&e.append("category",y),p&&e.append("search",p);let a=await fetch(`/api/attractions?${e}`),r=await a.json();t(r.attractions||[]),k(r.pagination?.pages||1)}catch(e){console.error("Error fetching attractions:",e)}l(!1)},C=async a=>{if(confirm("Are you sure you want to delete this attraction?"))try{(await fetch(`/api/attractions/${a}`,{method:"DELETE"})).ok?(t(e.filter(e=>e._id!==a)),alert("Attraction deleted successfully!")):alert("Error deleting attraction")}catch(e){console.error("Error deleting attraction:",e),alert("Error deleting attraction")}},_=async(a,r)=>{try{(await fetch(`/api/attractions/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!r})})).ok&&t(e.map(e=>e._id===a?{...e,isActive:!r}:e))}catch(e){console.error("Error updating attraction status:",e)}};return r.jsx(i.Z,{title:"Attractions Management",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Attractions"}),r.jsx("p",{className:"text-gray-600",children:"Manage tourist attractions and destinations"})]}),(0,r.jsxs)("a",{href:"/admin/attractions/new",className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[r.jsx(n,{className:"h-4 w-4"}),r.jsx("span",{children:"Add Attraction"})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search attractions...",value:p,onChange:e=>g(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),r.jsx("select",{value:y,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[{value:"all",label:"All Categories"},{value:"historical",label:"Historical"},{value:"natural",label:"Natural"},{value:"cultural",label:"Cultural"},{value:"modern",label:"Modern"},{value:"religious",label:"Religious"}].map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))}),(0,r.jsxs)("select",{value:v,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]}),r.jsx("button",{onClick:()=>{g(""),b("all"),f("all"),N(1)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset Filters"})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attraction"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name.en}),r.jsx("div",{className:"text-sm text-gray-500 chinese-font",children:e.name.zh})]})}),r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(c.Z,{className:"h-4 w-4 text-gray-400 mr-1"}),e.location.city,", ",e.location.province]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 capitalize",children:e.category})}),r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(o.Z,{className:"h-4 w-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"ml-1 text-sm text-gray-900",children:e.rating}),(0,r.jsxs)("span",{className:"ml-1 text-sm text-gray-500",children:["(",e.reviewCount,")"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{onClick:()=>_(e._id,e.isActive),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(x.Z,{className:"h-4 w-4 text-gray-400 mr-1"}),new Date(e.createdAt).toLocaleDateString()]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("a",{href:`/attractions/${e._id}`,className:"text-gray-400 hover:text-gray-600",title:"View",children:r.jsx(m.Z,{className:"h-4 w-4"})}),r.jsx("a",{href:`/admin/attractions/${e._id}/edit`,className:"text-blue-600 hover:text-blue-800",title:"Edit",children:r.jsx(h,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>C(e._id),className:"text-red-600 hover:text-red-800",title:"Delete",children:r.jsx(u,{className:"h-4 w-4"})})]})})]},e._id))})]})}),w>1&&r.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>N(Math.max(1,j-1)),disabled:1===j,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsx("button",{onClick:()=>N(Math.min(w,j+1)),disabled:j===w,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,r.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing page ",r.jsx("span",{className:"font-medium",children:j})," of"," ",r.jsx("span",{className:"font-medium",children:w})]})}),r.jsx("div",{children:(0,r.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[r.jsx("button",{onClick:()=>N(Math.max(1,j-1)),disabled:1===j,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(Math.min(5,w))].map((e,t)=>{let a=t+1;return r.jsx("button",{onClick:()=>N(a),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${j===a?"z-10 bg-red-50 border-red-500 text-red-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:a},a)}),r.jsx("button",{onClick:()=>N(Math.min(w,j+1)),disabled:j===w,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})})]})})]})})}},37358:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},12714:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},33734:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},43086:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`/Users/luxiang/Cursor/AI-project/travel-to-china/app/admin/attractions/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,114,684],()=>a(93349));module.exports=r})();