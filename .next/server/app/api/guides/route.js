"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/guides/route";
exports.ids = ["app/api/guides/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fguides%2Froute&page=%2Fapi%2Fguides%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fguides%2Froute.ts&appDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fguides%2Froute&page=%2Fapi%2Fguides%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fguides%2Froute.ts&appDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_luxiang_Cursor_AI_project_travel_to_china_app_api_guides_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/guides/route.ts */ \"(rsc)/./app/api/guides/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/guides/route\",\n        pathname: \"/api/guides\",\n        filename: \"route\",\n        bundlePath: \"app/api/guides/route\"\n    },\n    resolvedPagePath: \"/Users/luxiang/Cursor/AI-project/travel-to-china/app/api/guides/route.ts\",\n    nextConfigOutput,\n    userland: _Users_luxiang_Cursor_AI_project_travel_to_china_app_api_guides_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/guides/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZndWlkZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmd1aWRlcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmd1aWRlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmx1eGlhbmclMkZDdXJzb3IlMkZBSS1wcm9qZWN0JTJGdHJhdmVsLXRvLWNoaW5hJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmx1eGlhbmclMkZDdXJzb3IlMkZBSS1wcm9qZWN0JTJGdHJhdmVsLXRvLWNoaW5hJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QjtBQUNyRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3RyYXZlbC10by1jaGluYS8/YWZiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbHV4aWFuZy9DdXJzb3IvQUktcHJvamVjdC90cmF2ZWwtdG8tY2hpbmEvYXBwL2FwaS9ndWlkZXMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2d1aWRlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2d1aWRlc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ3VpZGVzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2x1eGlhbmcvQ3Vyc29yL0FJLXByb2plY3QvdHJhdmVsLXRvLWNoaW5hL2FwcC9hcGkvZ3VpZGVzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9ndWlkZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fguides%2Froute&page=%2Fapi%2Fguides%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fguides%2Froute.ts&appDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/guides/route.ts":
/*!*********************************!*\
  !*** ./app/api/guides/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./lib/mongodb.ts\");\n/* harmony import */ var _models_Guide__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/Guide */ \"(rsc)/./models/Guide.ts\");\n/* harmony import */ var _lib_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/cache */ \"(rsc)/./lib/cache.ts\");\n\n\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"12\");\n        const category = searchParams.get(\"category\");\n        const search = searchParams.get(\"search\");\n        const sort = searchParams.get(\"sort\") || \"newest\";\n        // Generate cache key from query parameters\n        const cacheKey = _lib_cache__WEBPACK_IMPORTED_MODULE_3__.cacheUtils.generateKey(\"guides\", page.toString(), limit.toString(), category || \"all\", search || \"none\", sort);\n        // Try to get from cache first\n        const cached = await _lib_cache__WEBPACK_IMPORTED_MODULE_3__.defaultCache.get(cacheKey);\n        if (cached) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(cached);\n        }\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        // Build query\n        const query = {\n            isPublished: true\n        };\n        if (category && category !== \"all\") {\n            query.category = category;\n        }\n        if (search) {\n            query.$or = [\n                {\n                    \"title.en\": {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    \"title.zh\": {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    \"excerpt.en\": {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    \"excerpt.zh\": {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    tags: {\n                        $in: [\n                            new RegExp(search, \"i\")\n                        ]\n                    }\n                }\n            ];\n        }\n        // Build sort\n        let sortQuery = {};\n        switch(sort){\n            case \"newest\":\n                sortQuery = {\n                    publishedAt: -1\n                };\n                break;\n            case \"popular\":\n                sortQuery = {\n                    views: -1\n                };\n                break;\n            case \"likes\":\n                sortQuery = {\n                    likes: -1\n                };\n                break;\n            default:\n                sortQuery = {\n                    publishedAt: -1\n                };\n        }\n        const skip = (page - 1) * limit;\n        const [guides, total] = await Promise.all([\n            _models_Guide__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find(query).populate(\"author\", \"name image\").sort(sortQuery).skip(skip).limit(limit).lean(),\n            _models_Guide__WEBPACK_IMPORTED_MODULE_2__[\"default\"].countDocuments(query)\n        ]);\n        const result = {\n            guides,\n            pagination: {\n                page,\n                limit,\n                total,\n                pages: Math.ceil(total / limit)\n            }\n        };\n        // Cache the result for 5 minutes\n        await _lib_cache__WEBPACK_IMPORTED_MODULE_3__.defaultCache.set(cacheKey, result, 5 * 60 * 1000);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (error) {\n        console.error(\"Error fetching guides:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        // This would typically require authentication\n        const data = await request.json();\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const guide = await _models_Guide__WEBPACK_IMPORTED_MODULE_2__[\"default\"].create(data);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(guide, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating guide:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRSxPQUFPTSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU9qRCxxREFBWUEsQ0FBQ3FCLElBQUksQ0FDdEI7WUFBRTRCLE9BQU87UUFBd0IsR0FDakM7WUFBRUUsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFTyxlQUFlQyxLQUFLOUMsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLDhDQUE4QztRQUM5QyxNQUFNK0MsT0FBTyxNQUFNL0MsUUFBUWUsSUFBSTtRQUUvQixNQUFNcEIsd0RBQVNBO1FBRWYsTUFBTXFELFFBQVEsTUFBTXBELHFEQUFLQSxDQUFDcUQsTUFBTSxDQUFDRjtRQUVqQyxPQUFPckQscURBQVlBLENBQUNxQixJQUFJLENBQUNpQyxPQUFPO1lBQUVILFFBQVE7UUFBSTtJQUVoRCxFQUFFLE9BQU9GLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBT2pELHFEQUFZQSxDQUFDcUIsSUFBSSxDQUN0QjtZQUFFNEIsT0FBTztRQUF3QixHQUNqQztZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RyYXZlbC10by1jaGluYS8uL2FwcC9hcGkvZ3VpZGVzL3JvdXRlLnRzP2RiNTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IGRiQ29ubmVjdCBmcm9tICdAL2xpYi9tb25nb2RiJ1xuaW1wb3J0IEd1aWRlIGZyb20gJ0AvbW9kZWxzL0d1aWRlJ1xuaW1wb3J0IHsgZGVmYXVsdENhY2hlLCBjYWNoZVV0aWxzIH0gZnJvbSAnQC9saWIvY2FjaGUnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgncGFnZScpIHx8ICcxJylcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzEyJylcbiAgICBjb25zdCBjYXRlZ29yeSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2NhdGVnb3J5JylcbiAgICBjb25zdCBzZWFyY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KCdzZWFyY2gnKVxuICAgIGNvbnN0IHNvcnQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzb3J0JykgfHwgJ25ld2VzdCdcblxuICAgIC8vIEdlbmVyYXRlIGNhY2hlIGtleSBmcm9tIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICBjb25zdCBjYWNoZUtleSA9IGNhY2hlVXRpbHMuZ2VuZXJhdGVLZXkoXG4gICAgICAnZ3VpZGVzJyxcbiAgICAgIHBhZ2UudG9TdHJpbmcoKSxcbiAgICAgIGxpbWl0LnRvU3RyaW5nKCksXG4gICAgICBjYXRlZ29yeSB8fCAnYWxsJyxcbiAgICAgIHNlYXJjaCB8fCAnbm9uZScsXG4gICAgICBzb3J0XG4gICAgKVxuXG4gICAgLy8gVHJ5IHRvIGdldCBmcm9tIGNhY2hlIGZpcnN0XG4gICAgY29uc3QgY2FjaGVkID0gYXdhaXQgZGVmYXVsdENhY2hlLmdldChjYWNoZUtleSlcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oY2FjaGVkKVxuICAgIH1cblxuICAgIGF3YWl0IGRiQ29ubmVjdCgpXG5cbiAgICAvLyBCdWlsZCBxdWVyeVxuICAgIGNvbnN0IHF1ZXJ5OiBhbnkgPSB7IGlzUHVibGlzaGVkOiB0cnVlIH1cbiAgICBcbiAgICBpZiAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkgIT09ICdhbGwnKSB7XG4gICAgICBxdWVyeS5jYXRlZ29yeSA9IGNhdGVnb3J5XG4gICAgfVxuICAgIFxuICAgIGlmIChzZWFyY2gpIHtcbiAgICAgIHF1ZXJ5LiRvciA9IFtcbiAgICAgICAgeyAndGl0bGUuZW4nOiB7ICRyZWdleDogc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgeyAndGl0bGUuemgnOiB7ICRyZWdleDogc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgeyAnZXhjZXJwdC5lbic6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgICB7ICdleGNlcnB0LnpoJzogeyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH0sXG4gICAgICAgIHsgdGFnczogeyAkaW46IFtuZXcgUmVnRXhwKHNlYXJjaCwgJ2knKV0gfSB9LFxuICAgICAgXVxuICAgIH1cblxuICAgIC8vIEJ1aWxkIHNvcnRcbiAgICBsZXQgc29ydFF1ZXJ5OiBhbnkgPSB7fVxuICAgIHN3aXRjaCAoc29ydCkge1xuICAgICAgY2FzZSAnbmV3ZXN0JzpcbiAgICAgICAgc29ydFF1ZXJ5ID0geyBwdWJsaXNoZWRBdDogLTEgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncG9wdWxhcic6XG4gICAgICAgIHNvcnRRdWVyeSA9IHsgdmlld3M6IC0xIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2xpa2VzJzpcbiAgICAgICAgc29ydFF1ZXJ5ID0geyBsaWtlczogLTEgfVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc29ydFF1ZXJ5ID0geyBwdWJsaXNoZWRBdDogLTEgfVxuICAgIH1cblxuICAgIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogbGltaXRcblxuICAgIGNvbnN0IFtndWlkZXMsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIEd1aWRlLmZpbmQocXVlcnkpXG4gICAgICAgIC5wb3B1bGF0ZSgnYXV0aG9yJywgJ25hbWUgaW1hZ2UnKVxuICAgICAgICAuc29ydChzb3J0UXVlcnkpXG4gICAgICAgIC5za2lwKHNraXApXG4gICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgLmxlYW4oKSxcbiAgICAgIEd1aWRlLmNvdW50RG9jdW1lbnRzKHF1ZXJ5KVxuICAgIF0pXG5cbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBndWlkZXMsXG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIHBhZ2UsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgcGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgLy8gQ2FjaGUgdGhlIHJlc3VsdCBmb3IgNSBtaW51dGVzXG4gICAgYXdhaXQgZGVmYXVsdENhY2hlLnNldChjYWNoZUtleSwgcmVzdWx0LCA1ICogNjAgKiAxMDAwKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdClcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGd1aWRlczonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gVGhpcyB3b3VsZCB0eXBpY2FsbHkgcmVxdWlyZSBhdXRoZW50aWNhdGlvblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIFxuICAgIGF3YWl0IGRiQ29ubmVjdCgpXG4gICAgXG4gICAgY29uc3QgZ3VpZGUgPSBhd2FpdCBHdWlkZS5jcmVhdGUoZGF0YSlcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZ3VpZGUsIHsgc3RhdHVzOiAyMDEgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGd1aWRlOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZGJDb25uZWN0IiwiR3VpZGUiLCJkZWZhdWx0Q2FjaGUiLCJjYWNoZVV0aWxzIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInBhZ2UiLCJwYXJzZUludCIsImdldCIsImxpbWl0IiwiY2F0ZWdvcnkiLCJzZWFyY2giLCJzb3J0IiwiY2FjaGVLZXkiLCJnZW5lcmF0ZUtleSIsInRvU3RyaW5nIiwiY2FjaGVkIiwianNvbiIsInF1ZXJ5IiwiaXNQdWJsaXNoZWQiLCIkb3IiLCIkcmVnZXgiLCIkb3B0aW9ucyIsInRhZ3MiLCIkaW4iLCJSZWdFeHAiLCJzb3J0UXVlcnkiLCJwdWJsaXNoZWRBdCIsInZpZXdzIiwibGlrZXMiLCJza2lwIiwiZ3VpZGVzIiwidG90YWwiLCJQcm9taXNlIiwiYWxsIiwiZmluZCIsInBvcHVsYXRlIiwibGVhbiIsImNvdW50RG9jdW1lbnRzIiwicmVzdWx0IiwicGFnaW5hdGlvbiIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJzZXQiLCJlcnJvciIsImNvbnNvbGUiLCJzdGF0dXMiLCJQT1NUIiwiZGF0YSIsImd1aWRlIiwiY3JlYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/guides/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/cache.ts":
/*!**********************!*\
  !*** ./lib/cache.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheUtils: () => (/* binding */ cacheUtils),\n/* harmony export */   createCache: () => (/* binding */ createCache),\n/* harmony export */   defaultCache: () => (/* binding */ defaultCache)\n/* harmony export */ });\nclass MemoryCache {\n    constructor(options = {}){\n        this.cache = new Map();\n        this.maxSize = options.maxSize || 100;\n        this.defaultTTL = options.ttl || 5 * 60 * 1000; // 5 minutes default\n    }\n    set(key, value, ttl) {\n        const expiry = Date.now() + (ttl || this.defaultTTL);\n        // Remove oldest items if cache is full\n        if (this.cache.size >= this.maxSize) {\n            const oldestKey = this.cache.keys().next().value;\n            if (oldestKey) {\n                this.cache.delete(oldestKey);\n            }\n        }\n        this.cache.set(key, {\n            data: value,\n            timestamp: Date.now(),\n            expiry\n        });\n    }\n    get(key) {\n        const item = this.cache.get(key);\n        if (!item) {\n            return null;\n        }\n        // Check if item has expired\n        if (Date.now() > item.expiry) {\n            this.cache.delete(key);\n            return null;\n        }\n        return item.data;\n    }\n    has(key) {\n        const item = this.cache.get(key);\n        if (!item) return false;\n        if (Date.now() > item.expiry) {\n            this.cache.delete(key);\n            return false;\n        }\n        return true;\n    }\n    delete(key) {\n        return this.cache.delete(key);\n    }\n    clear() {\n        this.cache.clear();\n    }\n    size() {\n        // Clean expired items first\n        this.cleanExpired();\n        return this.cache.size;\n    }\n    cleanExpired() {\n        const now = Date.now();\n        const keysToDelete = [];\n        this.cache.forEach((item, key)=>{\n            if (now > item.expiry) {\n                keysToDelete.push(key);\n            }\n        });\n        keysToDelete.forEach((key)=>this.cache.delete(key));\n    }\n    // Get cache statistics\n    getStats() {\n        this.cleanExpired();\n        return {\n            size: this.cache.size,\n            maxSize: this.maxSize,\n            hitRate: 0\n        };\n    }\n}\nclass LocalStorageCache {\n    constructor(prefix = \"app_cache_\", ttl = 30 * 60 * 1000){\n        this.prefix = prefix;\n        this.defaultTTL = ttl;\n    }\n    set(key, value, ttl) {\n        try {\n            const expiry = Date.now() + (ttl || this.defaultTTL);\n            const item = {\n                data: value,\n                timestamp: Date.now(),\n                expiry\n            };\n            localStorage.setItem(this.prefix + key, JSON.stringify(item));\n        } catch (error) {\n            console.warn(\"Failed to set localStorage cache:\", error);\n        }\n    }\n    get(key) {\n        try {\n            const stored = localStorage.getItem(this.prefix + key);\n            if (!stored) return null;\n            const item = JSON.parse(stored);\n            if (Date.now() > item.expiry) {\n                localStorage.removeItem(this.prefix + key);\n                return null;\n            }\n            return item.data;\n        } catch (error) {\n            console.warn(\"Failed to get localStorage cache:\", error);\n            return null;\n        }\n    }\n    has(key) {\n        return this.get(key) !== null;\n    }\n    delete(key) {\n        try {\n            localStorage.removeItem(this.prefix + key);\n            return true;\n        } catch (error) {\n            console.warn(\"Failed to delete localStorage cache:\", error);\n            return false;\n        }\n    }\n    clear() {\n        try {\n            const keys = Object.keys(localStorage).filter((key)=>key.startsWith(this.prefix));\n            keys.forEach((key)=>localStorage.removeItem(key));\n        } catch (error) {\n            console.warn(\"Failed to clear localStorage cache:\", error);\n        }\n    }\n    // Clean expired items\n    cleanup() {\n        try {\n            const keys = Object.keys(localStorage).filter((key)=>key.startsWith(this.prefix));\n            keys.forEach((key)=>{\n                const stored = localStorage.getItem(key);\n                if (stored) {\n                    try {\n                        const item = JSON.parse(stored);\n                        if (Date.now() > item.expiry) {\n                            localStorage.removeItem(key);\n                        }\n                    } catch  {\n                        localStorage.removeItem(key); // Remove invalid items\n                    }\n                }\n            });\n        } catch (error) {\n            console.warn(\"Failed to cleanup localStorage cache:\", error);\n        }\n    }\n}\n// Multi-layer cache strategy\nclass MultiLayerCache {\n    constructor(options = {}){\n        this.memoryCache = new MemoryCache({\n            maxSize: options.maxSize || 50,\n            ttl: options.ttl || 5 * 60 * 1000 // 5 minutes for memory\n        });\n        this.storageCache = new LocalStorageCache(\"travel_cache_\", options.ttl || 30 * 60 * 1000 // 30 minutes for storage\n        );\n    }\n    async get(key) {\n        // Try memory cache first\n        let data = this.memoryCache.get(key);\n        if (data) {\n            return data;\n        }\n        // Try localStorage cache\n        data = this.storageCache.get(key);\n        if (data) {\n            // Promote to memory cache\n            this.memoryCache.set(key, data, 5 * 60 * 1000); // 5 minutes in memory\n            return data;\n        }\n        return null;\n    }\n    async set(key, value, ttl) {\n        // Set in both caches\n        this.memoryCache.set(key, value, Math.min(ttl || 5 * 60 * 1000, 5 * 60 * 1000));\n        this.storageCache.set(key, value, ttl || 30 * 60 * 1000);\n    }\n    async has(key) {\n        return this.memoryCache.has(key) || this.storageCache.has(key);\n    }\n    async delete(key) {\n        const memoryDeleted = this.memoryCache.delete(key);\n        const storageDeleted = this.storageCache.delete(key);\n        return memoryDeleted || storageDeleted;\n    }\n    async clear() {\n        this.memoryCache.clear();\n        this.storageCache.clear();\n    }\n    cleanup() {\n        this.storageCache.cleanup();\n    }\n    getStats() {\n        return {\n            memory: this.memoryCache.getStats(),\n            storage: {\n                // Would need to implement storage stats\n                size: 0,\n                hitRate: 0\n            }\n        };\n    }\n}\n// Cache factory\nfunction createCache(type = \"multi\", options = {}) {\n    switch(type){\n        case \"memory\":\n            return new MemoryCache(options);\n        case \"storage\":\n            return new LocalStorageCache(\"travel_cache_\", options.ttl);\n        case \"multi\":\n            return new MultiLayerCache(options);\n        default:\n            return new MultiLayerCache(options);\n    }\n}\n// Default cache instance\nconst defaultCache = createCache(\"multi\", {\n    ttl: 10 * 60 * 1000,\n    maxSize: 100\n});\n// Cache utilities\nconst cacheUtils = {\n    // Generate cache key from multiple parameters\n    generateKey: (...parts)=>{\n        return parts.map((part)=>String(part)).join(\":\");\n    },\n    // Cached function wrapper\n    withCache: (fn, keyGenerator, ttl)=>{\n        return async (...args)=>{\n            const key = keyGenerator(...args);\n            // Try to get from cache\n            const cached = await defaultCache.get(key);\n            if (cached !== null) {\n                return cached;\n            }\n            // Execute function and cache result\n            const result = await fn(...args);\n            await defaultCache.set(key, result, ttl);\n            return result;\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2FjaGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBV0EsTUFBTUE7SUFLSkMsWUFBWUMsVUFBd0IsQ0FBQyxDQUFDLENBQUU7YUFKaENDLFFBQVEsSUFBSUM7UUFLbEIsSUFBSSxDQUFDQyxPQUFPLEdBQUdILFFBQVFHLE9BQU8sSUFBSTtRQUNsQyxJQUFJLENBQUNDLFVBQVUsR0FBR0osUUFBUUssR0FBRyxJQUFJLElBQUksS0FBSyxNQUFNLG9CQUFvQjtJQUN0RTtJQUVBQyxJQUFPQyxHQUFXLEVBQUVDLEtBQVEsRUFBRUgsR0FBWSxFQUFRO1FBQ2hELE1BQU1JLFNBQVNDLEtBQUtDLEdBQUcsS0FBTU4sQ0FBQUEsT0FBTyxJQUFJLENBQUNELFVBQVU7UUFFbkQsdUNBQXVDO1FBQ3ZDLElBQUksSUFBSSxDQUFDSCxLQUFLLENBQUNXLElBQUksSUFBSSxJQUFJLENBQUNULE9BQU8sRUFBRTtZQUNuQyxNQUFNVSxZQUFZLElBQUksQ0FBQ1osS0FBSyxDQUFDYSxJQUFJLEdBQUdDLElBQUksR0FBR1AsS0FBSztZQUNoRCxJQUFJSyxXQUFXO2dCQUNiLElBQUksQ0FBQ1osS0FBSyxDQUFDZSxNQUFNLENBQUNIO1lBQ3BCO1FBQ0Y7UUFFQSxJQUFJLENBQUNaLEtBQUssQ0FBQ0ssR0FBRyxDQUFDQyxLQUFLO1lBQ2xCVSxNQUFNVDtZQUNOVSxXQUFXUixLQUFLQyxHQUFHO1lBQ25CRjtRQUNGO0lBQ0Y7SUFFQVUsSUFBT1osR0FBVyxFQUFZO1FBQzVCLE1BQU1hLE9BQU8sSUFBSSxDQUFDbkIsS0FBSyxDQUFDa0IsR0FBRyxDQUFDWjtRQUU1QixJQUFJLENBQUNhLE1BQU07WUFDVCxPQUFPO1FBQ1Q7UUFFQSw0QkFBNEI7UUFDNUIsSUFBSVYsS0FBS0MsR0FBRyxLQUFLUyxLQUFLWCxNQUFNLEVBQUU7WUFDNUIsSUFBSSxDQUFDUixLQUFLLENBQUNlLE1BQU0sQ0FBQ1Q7WUFDbEIsT0FBTztRQUNUO1FBRUEsT0FBT2EsS0FBS0gsSUFBSTtJQUNsQjtJQUVBSSxJQUFJZCxHQUFXLEVBQVc7UUFDeEIsTUFBTWEsT0FBTyxJQUFJLENBQUNuQixLQUFLLENBQUNrQixHQUFHLENBQUNaO1FBQzVCLElBQUksQ0FBQ2EsTUFBTSxPQUFPO1FBRWxCLElBQUlWLEtBQUtDLEdBQUcsS0FBS1MsS0FBS1gsTUFBTSxFQUFFO1lBQzVCLElBQUksQ0FBQ1IsS0FBSyxDQUFDZSxNQUFNLENBQUNUO1lBQ2xCLE9BQU87UUFDVDtRQUVBLE9BQU87SUFDVDtJQUVBUyxPQUFPVCxHQUFXLEVBQVc7UUFDM0IsT0FBTyxJQUFJLENBQUNOLEtBQUssQ0FBQ2UsTUFBTSxDQUFDVDtJQUMzQjtJQUVBZSxRQUFjO1FBQ1osSUFBSSxDQUFDckIsS0FBSyxDQUFDcUIsS0FBSztJQUNsQjtJQUVBVixPQUFlO1FBQ2IsNEJBQTRCO1FBQzVCLElBQUksQ0FBQ1csWUFBWTtRQUNqQixPQUFPLElBQUksQ0FBQ3RCLEtBQUssQ0FBQ1csSUFBSTtJQUN4QjtJQUVRVyxlQUFxQjtRQUMzQixNQUFNWixNQUFNRCxLQUFLQyxHQUFHO1FBQ3BCLE1BQU1hLGVBQXlCLEVBQUU7UUFFakMsSUFBSSxDQUFDdkIsS0FBSyxDQUFDd0IsT0FBTyxDQUFDLENBQUNMLE1BQU1iO1lBQ3hCLElBQUlJLE1BQU1TLEtBQUtYLE1BQU0sRUFBRTtnQkFDckJlLGFBQWFFLElBQUksQ0FBQ25CO1lBQ3BCO1FBQ0Y7UUFFQWlCLGFBQWFDLE9BQU8sQ0FBQ2xCLENBQUFBLE1BQU8sSUFBSSxDQUFDTixLQUFLLENBQUNlLE1BQU0sQ0FBQ1Q7SUFDaEQ7SUFFQSx1QkFBdUI7SUFDdkJvQixXQUFXO1FBQ1QsSUFBSSxDQUFDSixZQUFZO1FBQ2pCLE9BQU87WUFDTFgsTUFBTSxJQUFJLENBQUNYLEtBQUssQ0FBQ1csSUFBSTtZQUNyQlQsU0FBUyxJQUFJLENBQUNBLE9BQU87WUFDckJ5QixTQUFTO1FBQ1g7SUFDRjtBQUNGO0FBRUEsTUFBTUM7SUFJSjlCLFlBQVkrQixTQUFTLFlBQVksRUFBRXpCLE1BQU0sS0FBSyxLQUFLLElBQUksQ0FBRTtRQUN2RCxJQUFJLENBQUN5QixNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDMUIsVUFBVSxHQUFHQztJQUNwQjtJQUVBQyxJQUFPQyxHQUFXLEVBQUVDLEtBQVEsRUFBRUgsR0FBWSxFQUFRO1FBQ2hELElBQUk7WUFDRixNQUFNSSxTQUFTQyxLQUFLQyxHQUFHLEtBQU1OLENBQUFBLE9BQU8sSUFBSSxDQUFDRCxVQUFVO1lBQ25ELE1BQU1nQixPQUFxQjtnQkFDekJILE1BQU1UO2dCQUNOVSxXQUFXUixLQUFLQyxHQUFHO2dCQUNuQkY7WUFDRjtZQUVBc0IsYUFBYUMsT0FBTyxDQUFDLElBQUksQ0FBQ0YsTUFBTSxHQUFHdkIsS0FBSzBCLEtBQUtDLFNBQVMsQ0FBQ2Q7UUFDekQsRUFBRSxPQUFPZSxPQUFPO1lBQ2RDLFFBQVFDLElBQUksQ0FBQyxxQ0FBcUNGO1FBQ3BEO0lBQ0Y7SUFFQWhCLElBQU9aLEdBQVcsRUFBWTtRQUM1QixJQUFJO1lBQ0YsTUFBTStCLFNBQVNQLGFBQWFRLE9BQU8sQ0FBQyxJQUFJLENBQUNULE1BQU0sR0FBR3ZCO1lBQ2xELElBQUksQ0FBQytCLFFBQVEsT0FBTztZQUVwQixNQUFNbEIsT0FBcUJhLEtBQUtPLEtBQUssQ0FBQ0Y7WUFFdEMsSUFBSTVCLEtBQUtDLEdBQUcsS0FBS1MsS0FBS1gsTUFBTSxFQUFFO2dCQUM1QnNCLGFBQWFVLFVBQVUsQ0FBQyxJQUFJLENBQUNYLE1BQU0sR0FBR3ZCO2dCQUN0QyxPQUFPO1lBQ1Q7WUFFQSxPQUFPYSxLQUFLSCxJQUFJO1FBQ2xCLEVBQUUsT0FBT2tCLE9BQU87WUFDZEMsUUFBUUMsSUFBSSxDQUFDLHFDQUFxQ0Y7WUFDbEQsT0FBTztRQUNUO0lBQ0Y7SUFFQWQsSUFBSWQsR0FBVyxFQUFXO1FBQ3hCLE9BQU8sSUFBSSxDQUFDWSxHQUFHLENBQUNaLFNBQVM7SUFDM0I7SUFFQVMsT0FBT1QsR0FBVyxFQUFXO1FBQzNCLElBQUk7WUFDRndCLGFBQWFVLFVBQVUsQ0FBQyxJQUFJLENBQUNYLE1BQU0sR0FBR3ZCO1lBQ3RDLE9BQU87UUFDVCxFQUFFLE9BQU80QixPQUFPO1lBQ2RDLFFBQVFDLElBQUksQ0FBQyx3Q0FBd0NGO1lBQ3JELE9BQU87UUFDVDtJQUNGO0lBRUFiLFFBQWM7UUFDWixJQUFJO1lBQ0YsTUFBTVIsT0FBTzRCLE9BQU81QixJQUFJLENBQUNpQixjQUFjWSxNQUFNLENBQUNwQyxDQUFBQSxNQUFPQSxJQUFJcUMsVUFBVSxDQUFDLElBQUksQ0FBQ2QsTUFBTTtZQUMvRWhCLEtBQUtXLE9BQU8sQ0FBQ2xCLENBQUFBLE1BQU93QixhQUFhVSxVQUFVLENBQUNsQztRQUM5QyxFQUFFLE9BQU80QixPQUFPO1lBQ2RDLFFBQVFDLElBQUksQ0FBQyx1Q0FBdUNGO1FBQ3REO0lBQ0Y7SUFFQSxzQkFBc0I7SUFDdEJVLFVBQWdCO1FBQ2QsSUFBSTtZQUNGLE1BQU0vQixPQUFPNEIsT0FBTzVCLElBQUksQ0FBQ2lCLGNBQWNZLE1BQU0sQ0FBQ3BDLENBQUFBLE1BQU9BLElBQUlxQyxVQUFVLENBQUMsSUFBSSxDQUFDZCxNQUFNO1lBQy9FaEIsS0FBS1csT0FBTyxDQUFDbEIsQ0FBQUE7Z0JBQ1gsTUFBTStCLFNBQVNQLGFBQWFRLE9BQU8sQ0FBQ2hDO2dCQUNwQyxJQUFJK0IsUUFBUTtvQkFDVixJQUFJO3dCQUNGLE1BQU1sQixPQUFPYSxLQUFLTyxLQUFLLENBQUNGO3dCQUN4QixJQUFJNUIsS0FBS0MsR0FBRyxLQUFLUyxLQUFLWCxNQUFNLEVBQUU7NEJBQzVCc0IsYUFBYVUsVUFBVSxDQUFDbEM7d0JBQzFCO29CQUNGLEVBQUUsT0FBTTt3QkFDTndCLGFBQWFVLFVBQVUsQ0FBQ2xDLE1BQU0sdUJBQXVCO29CQUN2RDtnQkFDRjtZQUNGO1FBQ0YsRUFBRSxPQUFPNEIsT0FBTztZQUNkQyxRQUFRQyxJQUFJLENBQUMseUNBQXlDRjtRQUN4RDtJQUNGO0FBQ0Y7QUFFQSw2QkFBNkI7QUFDN0IsTUFBTVc7SUFJSi9DLFlBQVlDLFVBQXdCLENBQUMsQ0FBQyxDQUFFO1FBQ3RDLElBQUksQ0FBQytDLFdBQVcsR0FBRyxJQUFJakQsWUFBWTtZQUNqQ0ssU0FBU0gsUUFBUUcsT0FBTyxJQUFJO1lBQzVCRSxLQUFLTCxRQUFRSyxHQUFHLElBQUksSUFBSSxLQUFLLEtBQUssdUJBQXVCO1FBQzNEO1FBRUEsSUFBSSxDQUFDMkMsWUFBWSxHQUFHLElBQUluQixrQkFDdEIsaUJBQ0E3QixRQUFRSyxHQUFHLElBQUksS0FBSyxLQUFLLEtBQUsseUJBQXlCOztJQUUzRDtJQUVBLE1BQU1jLElBQU9aLEdBQVcsRUFBcUI7UUFDM0MseUJBQXlCO1FBQ3pCLElBQUlVLE9BQU8sSUFBSSxDQUFDOEIsV0FBVyxDQUFDNUIsR0FBRyxDQUFJWjtRQUNuQyxJQUFJVSxNQUFNO1lBQ1IsT0FBT0E7UUFDVDtRQUVBLHlCQUF5QjtRQUN6QkEsT0FBTyxJQUFJLENBQUMrQixZQUFZLENBQUM3QixHQUFHLENBQUlaO1FBQ2hDLElBQUlVLE1BQU07WUFDUiwwQkFBMEI7WUFDMUIsSUFBSSxDQUFDOEIsV0FBVyxDQUFDekMsR0FBRyxDQUFDQyxLQUFLVSxNQUFNLElBQUksS0FBSyxPQUFPLHNCQUFzQjtZQUN0RSxPQUFPQTtRQUNUO1FBRUEsT0FBTztJQUNUO0lBRUEsTUFBTVgsSUFBT0MsR0FBVyxFQUFFQyxLQUFRLEVBQUVILEdBQVksRUFBaUI7UUFDL0QscUJBQXFCO1FBQ3JCLElBQUksQ0FBQzBDLFdBQVcsQ0FBQ3pDLEdBQUcsQ0FBQ0MsS0FBS0MsT0FBT3lDLEtBQUtDLEdBQUcsQ0FBQzdDLE9BQU8sSUFBSSxLQUFLLE1BQU0sSUFBSSxLQUFLO1FBQ3pFLElBQUksQ0FBQzJDLFlBQVksQ0FBQzFDLEdBQUcsQ0FBQ0MsS0FBS0MsT0FBT0gsT0FBTyxLQUFLLEtBQUs7SUFDckQ7SUFFQSxNQUFNZ0IsSUFBSWQsR0FBVyxFQUFvQjtRQUN2QyxPQUFPLElBQUksQ0FBQ3dDLFdBQVcsQ0FBQzFCLEdBQUcsQ0FBQ2QsUUFBUSxJQUFJLENBQUN5QyxZQUFZLENBQUMzQixHQUFHLENBQUNkO0lBQzVEO0lBRUEsTUFBTVMsT0FBT1QsR0FBVyxFQUFvQjtRQUMxQyxNQUFNNEMsZ0JBQWdCLElBQUksQ0FBQ0osV0FBVyxDQUFDL0IsTUFBTSxDQUFDVDtRQUM5QyxNQUFNNkMsaUJBQWlCLElBQUksQ0FBQ0osWUFBWSxDQUFDaEMsTUFBTSxDQUFDVDtRQUNoRCxPQUFPNEMsaUJBQWlCQztJQUMxQjtJQUVBLE1BQU05QixRQUF1QjtRQUMzQixJQUFJLENBQUN5QixXQUFXLENBQUN6QixLQUFLO1FBQ3RCLElBQUksQ0FBQzBCLFlBQVksQ0FBQzFCLEtBQUs7SUFDekI7SUFFQXVCLFVBQWdCO1FBQ2QsSUFBSSxDQUFDRyxZQUFZLENBQUNILE9BQU87SUFDM0I7SUFFQWxCLFdBQVc7UUFDVCxPQUFPO1lBQ0wwQixRQUFRLElBQUksQ0FBQ04sV0FBVyxDQUFDcEIsUUFBUTtZQUNqQzJCLFNBQVM7Z0JBQ1Asd0NBQXdDO2dCQUN4QzFDLE1BQU07Z0JBQ05nQixTQUFTO1lBQ1g7UUFDRjtJQUNGO0FBQ0Y7QUFFQSxnQkFBZ0I7QUFDVCxTQUFTMkIsWUFBWUMsT0FBdUMsT0FBTyxFQUFFeEQsVUFBd0IsQ0FBQyxDQUFDO0lBQ3BHLE9BQVF3RDtRQUNOLEtBQUs7WUFDSCxPQUFPLElBQUkxRCxZQUFZRTtRQUN6QixLQUFLO1lBQ0gsT0FBTyxJQUFJNkIsa0JBQWtCLGlCQUFpQjdCLFFBQVFLLEdBQUc7UUFDM0QsS0FBSztZQUNILE9BQU8sSUFBSXlDLGdCQUFnQjlDO1FBQzdCO1lBQ0UsT0FBTyxJQUFJOEMsZ0JBQWdCOUM7SUFDL0I7QUFDRjtBQUVBLHlCQUF5QjtBQUNsQixNQUFNeUQsZUFBZUYsWUFBWSxTQUFTO0lBQy9DbEQsS0FBSyxLQUFLLEtBQUs7SUFDZkYsU0FBUztBQUNYLEdBQUc7QUFFSCxrQkFBa0I7QUFDWCxNQUFNdUQsYUFBYTtJQUN4Qiw4Q0FBOEM7SUFDOUNDLGFBQWEsQ0FBQyxHQUFHQztRQUNmLE9BQU9BLE1BQU1DLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FBUUMsT0FBT0QsT0FBT0UsSUFBSSxDQUFDO0lBQzlDO0lBRUEsMEJBQTBCO0lBQzFCQyxXQUFXLENBQ1RDLElBQ0FDLGNBQ0E5RDtRQUVBLE9BQU8sT0FBTyxHQUFHK0Q7WUFDZixNQUFNN0QsTUFBTTRELGdCQUFnQkM7WUFFNUIsd0JBQXdCO1lBQ3hCLE1BQU1DLFNBQVMsTUFBTVosYUFBYXRDLEdBQUcsQ0FBQ1o7WUFDdEMsSUFBSThELFdBQVcsTUFBTTtnQkFDbkIsT0FBT0E7WUFDVDtZQUVBLG9DQUFvQztZQUNwQyxNQUFNQyxTQUFTLE1BQU1KLE1BQU1FO1lBQzNCLE1BQU1YLGFBQWFuRCxHQUFHLENBQUNDLEtBQUsrRCxRQUFRakU7WUFFcEMsT0FBT2lFO1FBQ1Q7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmF2ZWwtdG8tY2hpbmEvLi9saWIvY2FjaGUudHM/N2NiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgQ2FjaGVJdGVtPFQ+IHtcbiAgZGF0YTogVDtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGV4cGlyeTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgQ2FjaGVPcHRpb25zIHtcbiAgdHRsPzogbnVtYmVyOyAvLyBUaW1lIHRvIGxpdmUgaW4gbWlsbGlzZWNvbmRzXG4gIG1heFNpemU/OiBudW1iZXI7IC8vIE1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIGluIGNhY2hlXG59XG5cbmNsYXNzIE1lbW9yeUNhY2hlIHtcbiAgcHJpdmF0ZSBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBDYWNoZUl0ZW08YW55Pj4oKTtcbiAgcHJpdmF0ZSBtYXhTaXplOiBudW1iZXI7XG4gIHByaXZhdGUgZGVmYXVsdFRUTDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENhY2hlT3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5tYXhTaXplID0gb3B0aW9ucy5tYXhTaXplIHx8IDEwMDtcbiAgICB0aGlzLmRlZmF1bHRUVEwgPSBvcHRpb25zLnR0bCB8fCA1ICogNjAgKiAxMDAwOyAvLyA1IG1pbnV0ZXMgZGVmYXVsdFxuICB9XG5cbiAgc2V0PFQ+KGtleTogc3RyaW5nLCB2YWx1ZTogVCwgdHRsPzogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgZXhwaXJ5ID0gRGF0ZS5ub3coKSArICh0dGwgfHwgdGhpcy5kZWZhdWx0VFRMKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgb2xkZXN0IGl0ZW1zIGlmIGNhY2hlIGlzIGZ1bGxcbiAgICBpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgY29uc3Qgb2xkZXN0S2V5ID0gdGhpcy5jYWNoZS5rZXlzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgaWYgKG9sZGVzdEtleSkge1xuICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShvbGRlc3RLZXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwge1xuICAgICAgZGF0YTogdmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBleHBpcnlcbiAgICB9KTtcbiAgfVxuXG4gIGdldDxUPihrZXk6IHN0cmluZyk6IFQgfCBudWxsIHtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcbiAgICBcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGl0ZW0gaGFzIGV4cGlyZWRcbiAgICBpZiAoRGF0ZS5ub3coKSA+IGl0ZW0uZXhwaXJ5KSB7XG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW0uZGF0YSBhcyBUO1xuICB9XG5cbiAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaXRlbSA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKCFpdGVtKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgaWYgKERhdGUubm93KCkgPiBpdGVtLmV4cGlyeSkge1xuICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBkZWxldGUoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgfVxuXG4gIHNpemUoKTogbnVtYmVyIHtcbiAgICAvLyBDbGVhbiBleHBpcmVkIGl0ZW1zIGZpcnN0XG4gICAgdGhpcy5jbGVhbkV4cGlyZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5zaXplO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbkV4cGlyZWQoKTogdm9pZCB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBrZXlzVG9EZWxldGU6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgdGhpcy5jYWNoZS5mb3JFYWNoKChpdGVtLCBrZXkpID0+IHtcbiAgICAgIGlmIChub3cgPiBpdGVtLmV4cGlyeSkge1xuICAgICAgICBrZXlzVG9EZWxldGUucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGtleXNUb0RlbGV0ZS5mb3JFYWNoKGtleSA9PiB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpKTtcbiAgfVxuXG4gIC8vIEdldCBjYWNoZSBzdGF0aXN0aWNzXG4gIGdldFN0YXRzKCkge1xuICAgIHRoaXMuY2xlYW5FeHBpcmVkKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNpemU6IHRoaXMuY2FjaGUuc2l6ZSxcbiAgICAgIG1heFNpemU6IHRoaXMubWF4U2l6ZSxcbiAgICAgIGhpdFJhdGU6IDAsIC8vIFdvdWxkIG5lZWQgdG8gdHJhY2sgaGl0cy9taXNzZXMgZm9yIHJlYWwgaW1wbGVtZW50YXRpb25cbiAgICB9O1xuICB9XG59XG5cbmNsYXNzIExvY2FsU3RvcmFnZUNhY2hlIHtcbiAgcHJpdmF0ZSBwcmVmaXg6IHN0cmluZztcbiAgcHJpdmF0ZSBkZWZhdWx0VFRMOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IocHJlZml4ID0gJ2FwcF9jYWNoZV8nLCB0dGwgPSAzMCAqIDYwICogMTAwMCkgeyAvLyAzMCBtaW51dGVzIGRlZmF1bHRcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeDtcbiAgICB0aGlzLmRlZmF1bHRUVEwgPSB0dGw7XG4gIH1cblxuICBzZXQ8VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBULCB0dGw/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhwaXJ5ID0gRGF0ZS5ub3coKSArICh0dGwgfHwgdGhpcy5kZWZhdWx0VFRMKTtcbiAgICAgIGNvbnN0IGl0ZW06IENhY2hlSXRlbTxUPiA9IHtcbiAgICAgICAgZGF0YTogdmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgZXhwaXJ5XG4gICAgICB9O1xuICAgICAgXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnByZWZpeCArIGtleSwgSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzZXQgbG9jYWxTdG9yYWdlIGNhY2hlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBnZXQ8VD4oa2V5OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMucHJlZml4ICsga2V5KTtcbiAgICAgIGlmICghc3RvcmVkKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgaXRlbTogQ2FjaGVJdGVtPFQ+ID0gSlNPTi5wYXJzZShzdG9yZWQpO1xuICAgICAgXG4gICAgICBpZiAoRGF0ZS5ub3coKSA+IGl0ZW0uZXhwaXJ5KSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMucHJlZml4ICsga2V5KTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpdGVtLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGdldCBsb2NhbFN0b3JhZ2UgY2FjaGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGtleSkgIT09IG51bGw7XG4gIH1cblxuICBkZWxldGUoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5wcmVmaXggKyBrZXkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGRlbGV0ZSBsb2NhbFN0b3JhZ2UgY2FjaGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maWx0ZXIoa2V5ID0+IGtleS5zdGFydHNXaXRoKHRoaXMucHJlZml4KSk7XG4gICAgICBrZXlzLmZvckVhY2goa2V5ID0+IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBjbGVhciBsb2NhbFN0b3JhZ2UgY2FjaGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFuIGV4cGlyZWQgaXRlbXNcbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGxvY2FsU3RvcmFnZSkuZmlsdGVyKGtleSA9PiBrZXkuc3RhcnRzV2l0aCh0aGlzLnByZWZpeCkpO1xuICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgIGlmIChzdG9yZWQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IEpTT04ucGFyc2Uoc3RvcmVkKTtcbiAgICAgICAgICAgIGlmIChEYXRlLm5vdygpID4gaXRlbS5leHBpcnkpIHtcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7IC8vIFJlbW92ZSBpbnZhbGlkIGl0ZW1zXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gY2xlYW51cCBsb2NhbFN0b3JhZ2UgY2FjaGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBNdWx0aS1sYXllciBjYWNoZSBzdHJhdGVneVxuY2xhc3MgTXVsdGlMYXllckNhY2hlIHtcbiAgcHJpdmF0ZSBtZW1vcnlDYWNoZTogTWVtb3J5Q2FjaGU7XG4gIHByaXZhdGUgc3RvcmFnZUNhY2hlOiBMb2NhbFN0b3JhZ2VDYWNoZTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBDYWNoZU9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubWVtb3J5Q2FjaGUgPSBuZXcgTWVtb3J5Q2FjaGUoe1xuICAgICAgbWF4U2l6ZTogb3B0aW9ucy5tYXhTaXplIHx8IDUwLFxuICAgICAgdHRsOiBvcHRpb25zLnR0bCB8fCA1ICogNjAgKiAxMDAwIC8vIDUgbWludXRlcyBmb3IgbWVtb3J5XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5zdG9yYWdlQ2FjaGUgPSBuZXcgTG9jYWxTdG9yYWdlQ2FjaGUoXG4gICAgICAndHJhdmVsX2NhY2hlXycsXG4gICAgICBvcHRpb25zLnR0bCB8fCAzMCAqIDYwICogMTAwMCAvLyAzMCBtaW51dGVzIGZvciBzdG9yYWdlXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdldDxUPihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgICAvLyBUcnkgbWVtb3J5IGNhY2hlIGZpcnN0XG4gICAgbGV0IGRhdGEgPSB0aGlzLm1lbW9yeUNhY2hlLmdldDxUPihrZXkpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvLyBUcnkgbG9jYWxTdG9yYWdlIGNhY2hlXG4gICAgZGF0YSA9IHRoaXMuc3RvcmFnZUNhY2hlLmdldDxUPihrZXkpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAvLyBQcm9tb3RlIHRvIG1lbW9yeSBjYWNoZVxuICAgICAgdGhpcy5tZW1vcnlDYWNoZS5zZXQoa2V5LCBkYXRhLCA1ICogNjAgKiAxMDAwKTsgLy8gNSBtaW51dGVzIGluIG1lbW9yeVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBzZXQ8VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBULCB0dGw/OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBTZXQgaW4gYm90aCBjYWNoZXNcbiAgICB0aGlzLm1lbW9yeUNhY2hlLnNldChrZXksIHZhbHVlLCBNYXRoLm1pbih0dGwgfHwgNSAqIDYwICogMTAwMCwgNSAqIDYwICogMTAwMCkpO1xuICAgIHRoaXMuc3RvcmFnZUNhY2hlLnNldChrZXksIHZhbHVlLCB0dGwgfHwgMzAgKiA2MCAqIDEwMDApO1xuICB9XG5cbiAgYXN5bmMgaGFzKGtleTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMubWVtb3J5Q2FjaGUuaGFzKGtleSkgfHwgdGhpcy5zdG9yYWdlQ2FjaGUuaGFzKGtleSk7XG4gIH1cblxuICBhc3luYyBkZWxldGUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBtZW1vcnlEZWxldGVkID0gdGhpcy5tZW1vcnlDYWNoZS5kZWxldGUoa2V5KTtcbiAgICBjb25zdCBzdG9yYWdlRGVsZXRlZCA9IHRoaXMuc3RvcmFnZUNhY2hlLmRlbGV0ZShrZXkpO1xuICAgIHJldHVybiBtZW1vcnlEZWxldGVkIHx8IHN0b3JhZ2VEZWxldGVkO1xuICB9XG5cbiAgYXN5bmMgY2xlYXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5tZW1vcnlDYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuc3RvcmFnZUNhY2hlLmNsZWFyKCk7XG4gIH1cblxuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIHRoaXMuc3RvcmFnZUNhY2hlLmNsZWFudXAoKTtcbiAgfVxuXG4gIGdldFN0YXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtZW1vcnk6IHRoaXMubWVtb3J5Q2FjaGUuZ2V0U3RhdHMoKSxcbiAgICAgIHN0b3JhZ2U6IHtcbiAgICAgICAgLy8gV291bGQgbmVlZCB0byBpbXBsZW1lbnQgc3RvcmFnZSBzdGF0c1xuICAgICAgICBzaXplOiAwLFxuICAgICAgICBoaXRSYXRlOiAwXG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG4vLyBDYWNoZSBmYWN0b3J5XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FjaGUodHlwZTogJ21lbW9yeScgfCAnc3RvcmFnZScgfCAnbXVsdGknID0gJ211bHRpJywgb3B0aW9uczogQ2FjaGVPcHRpb25zID0ge30pIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnbWVtb3J5JzpcbiAgICAgIHJldHVybiBuZXcgTWVtb3J5Q2FjaGUob3B0aW9ucyk7XG4gICAgY2FzZSAnc3RvcmFnZSc6XG4gICAgICByZXR1cm4gbmV3IExvY2FsU3RvcmFnZUNhY2hlKCd0cmF2ZWxfY2FjaGVfJywgb3B0aW9ucy50dGwpO1xuICAgIGNhc2UgJ211bHRpJzpcbiAgICAgIHJldHVybiBuZXcgTXVsdGlMYXllckNhY2hlKG9wdGlvbnMpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbmV3IE11bHRpTGF5ZXJDYWNoZShvcHRpb25zKTtcbiAgfVxufVxuXG4vLyBEZWZhdWx0IGNhY2hlIGluc3RhbmNlXG5leHBvcnQgY29uc3QgZGVmYXVsdENhY2hlID0gY3JlYXRlQ2FjaGUoJ211bHRpJywge1xuICB0dGw6IDEwICogNjAgKiAxMDAwLCAvLyAxMCBtaW51dGVzXG4gIG1heFNpemU6IDEwMFxufSk7XG5cbi8vIENhY2hlIHV0aWxpdGllc1xuZXhwb3J0IGNvbnN0IGNhY2hlVXRpbHMgPSB7XG4gIC8vIEdlbmVyYXRlIGNhY2hlIGtleSBmcm9tIG11bHRpcGxlIHBhcmFtZXRlcnNcbiAgZ2VuZXJhdGVLZXk6ICguLi5wYXJ0czogKHN0cmluZyB8IG51bWJlcilbXSk6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuIHBhcnRzLm1hcChwYXJ0ID0+IFN0cmluZyhwYXJ0KSkuam9pbignOicpO1xuICB9LFxuXG4gIC8vIENhY2hlZCBmdW5jdGlvbiB3cmFwcGVyXG4gIHdpdGhDYWNoZTogPFQgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IFByb21pc2U8YW55Pj4oXG4gICAgZm46IFQsXG4gICAga2V5R2VuZXJhdG9yOiAoLi4uYXJnczogUGFyYW1ldGVyczxUPikgPT4gc3RyaW5nLFxuICAgIHR0bD86IG51bWJlclxuICApID0+IHtcbiAgICByZXR1cm4gYXN5bmMgKC4uLmFyZ3M6IFBhcmFtZXRlcnM8VD4pOiBQcm9taXNlPEF3YWl0ZWQ8UmV0dXJuVHlwZTxUPj4+ID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGtleUdlbmVyYXRvciguLi5hcmdzKTtcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCBmcm9tIGNhY2hlXG4gICAgICBjb25zdCBjYWNoZWQgPSBhd2FpdCBkZWZhdWx0Q2FjaGUuZ2V0KGtleSk7XG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQgYXMgQXdhaXRlZDxSZXR1cm5UeXBlPFQ+PjtcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSBmdW5jdGlvbiBhbmQgY2FjaGUgcmVzdWx0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbiguLi5hcmdzKTtcbiAgICAgIGF3YWl0IGRlZmF1bHRDYWNoZS5zZXQoa2V5LCByZXN1bHQsIHR0bCk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxufTsiXSwibmFtZXMiOlsiTWVtb3J5Q2FjaGUiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJjYWNoZSIsIk1hcCIsIm1heFNpemUiLCJkZWZhdWx0VFRMIiwidHRsIiwic2V0Iiwia2V5IiwidmFsdWUiLCJleHBpcnkiLCJEYXRlIiwibm93Iiwic2l6ZSIsIm9sZGVzdEtleSIsImtleXMiLCJuZXh0IiwiZGVsZXRlIiwiZGF0YSIsInRpbWVzdGFtcCIsImdldCIsIml0ZW0iLCJoYXMiLCJjbGVhciIsImNsZWFuRXhwaXJlZCIsImtleXNUb0RlbGV0ZSIsImZvckVhY2giLCJwdXNoIiwiZ2V0U3RhdHMiLCJoaXRSYXRlIiwiTG9jYWxTdG9yYWdlQ2FjaGUiLCJwcmVmaXgiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJzdG9yZWQiLCJnZXRJdGVtIiwicGFyc2UiLCJyZW1vdmVJdGVtIiwiT2JqZWN0IiwiZmlsdGVyIiwic3RhcnRzV2l0aCIsImNsZWFudXAiLCJNdWx0aUxheWVyQ2FjaGUiLCJtZW1vcnlDYWNoZSIsInN0b3JhZ2VDYWNoZSIsIk1hdGgiLCJtaW4iLCJtZW1vcnlEZWxldGVkIiwic3RvcmFnZURlbGV0ZWQiLCJtZW1vcnkiLCJzdG9yYWdlIiwiY3JlYXRlQ2FjaGUiLCJ0eXBlIiwiZGVmYXVsdENhY2hlIiwiY2FjaGVVdGlscyIsImdlbmVyYXRlS2V5IiwicGFydHMiLCJtYXAiLCJwYXJ0IiwiU3RyaW5nIiwiam9pbiIsIndpdGhDYWNoZSIsImZuIiwia2V5R2VuZXJhdG9yIiwiYXJncyIsImNhY2hlZCIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/cache.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0I7QUFFL0IsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQSxJQUFJQyxTQUFTQyxPQUFPTixRQUFRO0FBRTVCLElBQUksQ0FBQ0ssUUFBUTtJQUNYQSxTQUFTQyxPQUFPTixRQUFRLEdBQUc7UUFBRU8sTUFBTTtRQUFNQyxTQUFTO0lBQUs7QUFDekQ7QUFFQSxlQUFlQztJQUNiLElBQUlKLE9BQU9FLElBQUksRUFBRTtRQUNmLE9BQU9GLE9BQU9FLElBQUk7SUFDcEI7SUFFQSxJQUFJLENBQUNGLE9BQU9HLE9BQU8sRUFBRTtRQUNuQixNQUFNRSxPQUFPO1lBQ1hDLGdCQUFnQjtRQUNsQjtRQUVBTixPQUFPRyxPQUFPLEdBQUdSLHVEQUFnQixDQUFDQyxhQUFhUyxNQUFNRyxJQUFJLENBQUMsQ0FBQ2I7WUFDekQsT0FBT0E7UUFDVDtJQUNGO0lBRUEsSUFBSTtRQUNGSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNwQyxFQUFFLE9BQU9NLEdBQUc7UUFDVlQsT0FBT0csT0FBTyxHQUFHO1FBQ2pCLE1BQU1NO0lBQ1I7SUFFQSxPQUFPVCxPQUFPRSxJQUFJO0FBQ3BCO0FBRUEsaUVBQWVFLFNBQVNBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmF2ZWwtdG8tY2hpbmEvLi9saWIvbW9uZ29kYi50cz8wNWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSdcblxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSSFcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJylcbn1cblxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZVxuXG5pZiAoIWNhY2hlZCkge1xuICBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgPSB7IGNvbm46IG51bGwsIHByb21pc2U6IG51bGwgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ublxuICB9XG5cbiAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICBidWZmZXJDb21tYW5kczogZmFsc2UsXG4gICAgfVxuXG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xuICAgICAgcmV0dXJuIG1vbmdvb3NlXG4gICAgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZVxuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsXG4gICAgdGhyb3cgZVxuICB9XG5cbiAgcmV0dXJuIGNhY2hlZC5jb25uXG59XG5cbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdCJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJjb25uZWN0IiwidGhlbiIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./models/Guide.ts":
/*!*************************!*\
  !*** ./models/Guide.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst GuideSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    title: {\n        type: Map,\n        of: String,\n        required: true\n    },\n    content: {\n        type: Map,\n        of: String,\n        required: true\n    },\n    excerpt: {\n        type: Map,\n        of: String,\n        required: true\n    },\n    author: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    category: {\n        type: String,\n        enum: [\n            \"first-time\",\n            \"food-culture\",\n            \"adventure\",\n            \"multi-city\",\n            \"budget\",\n            \"luxury\"\n        ],\n        required: true\n    },\n    tags: [\n        String\n    ],\n    coverImage: {\n        type: String,\n        required: true\n    },\n    images: [\n        String\n    ],\n    readTime: {\n        type: Number,\n        required: true\n    },\n    views: {\n        type: Number,\n        default: 0\n    },\n    likes: {\n        type: Number,\n        default: 0\n    },\n    isPublished: {\n        type: Boolean,\n        default: false\n    },\n    publishedAt: Date,\n    itinerary: [\n        {\n            day: {\n                type: Number,\n                required: true\n            },\n            title: {\n                type: String,\n                required: true\n            },\n            description: {\n                type: String,\n                required: true\n            },\n            activities: [\n                String\n            ],\n            accommodation: String,\n            transportation: String,\n            estimatedCost: Number\n        }\n    ],\n    relatedAttractions: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n            ref: \"Attraction\"\n        }\n    ],\n    seo: {\n        metaTitle: String,\n        metaDescription: String,\n        keywords: [\n            String\n        ]\n    }\n}, {\n    timestamps: true\n});\n// Indexes\nGuideSchema.index({\n    category: 1\n});\nGuideSchema.index({\n    isPublished: 1\n});\nGuideSchema.index({\n    publishedAt: -1\n});\nGuideSchema.index({\n    views: -1\n});\nGuideSchema.index({\n    tags: 1\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Guide || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Guide\", GuideSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvR3VpZGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFEO0FBbUNyRCxNQUFNRSxjQUFjLElBQUlELDRDQUFNQSxDQUFTO0lBQ3JDRSxPQUFPO1FBQ0xDLE1BQU1DO1FBQ05DLElBQUlDO1FBQ0pDLFVBQVU7SUFDWjtJQUNBQyxTQUFTO1FBQ1BMLE1BQU1DO1FBQ05DLElBQUlDO1FBQ0pDLFVBQVU7SUFDWjtJQUNBRSxTQUFTO1FBQ1BOLE1BQU1DO1FBQ05DLElBQUlDO1FBQ0pDLFVBQVU7SUFDWjtJQUNBRyxRQUFRO1FBQ05QLE1BQU1ILDRDQUFNQSxDQUFDVyxLQUFLLENBQUNDLFFBQVE7UUFDM0JDLEtBQUs7UUFDTE4sVUFBVTtJQUNaO0lBQ0FPLFVBQVU7UUFDUlgsTUFBTUc7UUFDTlMsTUFBTTtZQUFDO1lBQWM7WUFBZ0I7WUFBYTtZQUFjO1lBQVU7U0FBUztRQUNuRlIsVUFBVTtJQUNaO0lBQ0FTLE1BQU07UUFBQ1Y7S0FBTztJQUNkVyxZQUFZO1FBQ1ZkLE1BQU1HO1FBQ05DLFVBQVU7SUFDWjtJQUNBVyxRQUFRO1FBQUNaO0tBQU87SUFDaEJhLFVBQVU7UUFDUmhCLE1BQU1pQjtRQUNOYixVQUFVO0lBQ1o7SUFDQWMsT0FBTztRQUNMbEIsTUFBTWlCO1FBQ05FLFNBQVM7SUFDWDtJQUNBQyxPQUFPO1FBQ0xwQixNQUFNaUI7UUFDTkUsU0FBUztJQUNYO0lBQ0FFLGFBQWE7UUFDWHJCLE1BQU1zQjtRQUNOSCxTQUFTO0lBQ1g7SUFDQUksYUFBYUM7SUFDYkMsV0FBVztRQUFDO1lBQ1ZDLEtBQUs7Z0JBQUUxQixNQUFNaUI7Z0JBQVFiLFVBQVU7WUFBSztZQUNwQ0wsT0FBTztnQkFBRUMsTUFBTUc7Z0JBQVFDLFVBQVU7WUFBSztZQUN0Q3VCLGFBQWE7Z0JBQUUzQixNQUFNRztnQkFBUUMsVUFBVTtZQUFLO1lBQzVDd0IsWUFBWTtnQkFBQ3pCO2FBQU87WUFDcEIwQixlQUFlMUI7WUFDZjJCLGdCQUFnQjNCO1lBQ2hCNEIsZUFBZWQ7UUFDakI7S0FBRTtJQUNGZSxvQkFBb0I7UUFBQztZQUNuQmhDLE1BQU1ILDRDQUFNQSxDQUFDVyxLQUFLLENBQUNDLFFBQVE7WUFDM0JDLEtBQUs7UUFDUDtLQUFFO0lBQ0Z1QixLQUFLO1FBQ0hDLFdBQVcvQjtRQUNYZ0MsaUJBQWlCaEM7UUFDakJpQyxVQUFVO1lBQUNqQztTQUFPO0lBQ3BCO0FBQ0YsR0FBRztJQUNEa0MsWUFBWTtBQUNkO0FBRUEsVUFBVTtBQUNWdkMsWUFBWXdDLEtBQUssQ0FBQztJQUFFM0IsVUFBVTtBQUFFO0FBQ2hDYixZQUFZd0MsS0FBSyxDQUFDO0lBQUVqQixhQUFhO0FBQUU7QUFDbkN2QixZQUFZd0MsS0FBSyxDQUFDO0lBQUVmLGFBQWEsQ0FBQztBQUFFO0FBQ3BDekIsWUFBWXdDLEtBQUssQ0FBQztJQUFFcEIsT0FBTyxDQUFDO0FBQUU7QUFDOUJwQixZQUFZd0MsS0FBSyxDQUFDO0lBQUV6QixNQUFNO0FBQUU7QUFFNUIsaUVBQWVqQix3REFBZSxDQUFDNEMsS0FBSyxJQUFJNUMscURBQWMsQ0FBUyxTQUFTRSxZQUFZQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJhdmVsLXRvLWNoaW5hLy4vbW9kZWxzL0d1aWRlLnRzPzQ3ZDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IERvY3VtZW50LCBTY2hlbWEgfSBmcm9tICdtb25nb29zZSdcblxuZXhwb3J0IGludGVyZmFjZSBJR3VpZGUgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIHRpdGxlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gIGNvbnRlbnQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbiAgZXhjZXJwdDogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICBhdXRob3I6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkXG4gIGNhdGVnb3J5OiAnZmlyc3QtdGltZScgfCAnZm9vZC1jdWx0dXJlJyB8ICdhZHZlbnR1cmUnIHwgJ211bHRpLWNpdHknIHwgJ2J1ZGdldCcgfCAnbHV4dXJ5J1xuICB0YWdzOiBzdHJpbmdbXVxuICBjb3ZlckltYWdlOiBzdHJpbmdcbiAgaW1hZ2VzOiBzdHJpbmdbXVxuICByZWFkVGltZTogbnVtYmVyIC8vIGluIG1pbnV0ZXNcbiAgdmlld3M6IG51bWJlclxuICBsaWtlczogbnVtYmVyXG4gIGlzUHVibGlzaGVkOiBib29sZWFuXG4gIHB1Ymxpc2hlZEF0PzogRGF0ZVxuICBpdGluZXJhcnk/OiB7XG4gICAgZGF5OiBudW1iZXJcbiAgICB0aXRsZTogc3RyaW5nXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1xuICAgIGFjdGl2aXRpZXM6IHN0cmluZ1tdXG4gICAgYWNjb21tb2RhdGlvbj86IHN0cmluZ1xuICAgIHRyYW5zcG9ydGF0aW9uPzogc3RyaW5nXG4gICAgZXN0aW1hdGVkQ29zdD86IG51bWJlclxuICB9W11cbiAgcmVsYXRlZEF0dHJhY3Rpb25zOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZFtdXG4gIHNlbzoge1xuICAgIG1ldGFUaXRsZT86IHN0cmluZ1xuICAgIG1ldGFEZXNjcmlwdGlvbj86IHN0cmluZ1xuICAgIGtleXdvcmRzPzogc3RyaW5nW11cbiAgfVxuICBjcmVhdGVkQXQ6IERhdGVcbiAgdXBkYXRlZEF0OiBEYXRlXG59XG5cbmNvbnN0IEd1aWRlU2NoZW1hID0gbmV3IFNjaGVtYTxJR3VpZGU+KHtcbiAgdGl0bGU6IHtcbiAgICB0eXBlOiBNYXAsXG4gICAgb2Y6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgY29udGVudDoge1xuICAgIHR5cGU6IE1hcCxcbiAgICBvZjogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBleGNlcnB0OiB7XG4gICAgdHlwZTogTWFwLFxuICAgIG9mOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGF1dGhvcjoge1xuICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICByZWY6ICdVc2VyJyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgY2F0ZWdvcnk6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydmaXJzdC10aW1lJywgJ2Zvb2QtY3VsdHVyZScsICdhZHZlbnR1cmUnLCAnbXVsdGktY2l0eScsICdidWRnZXQnLCAnbHV4dXJ5J10sXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIHRhZ3M6IFtTdHJpbmddLFxuICBjb3ZlckltYWdlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBpbWFnZXM6IFtTdHJpbmddLFxuICByZWFkVGltZToge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgdmlld3M6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMCxcbiAgfSxcbiAgbGlrZXM6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMCxcbiAgfSxcbiAgaXNQdWJsaXNoZWQ6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICB9LFxuICBwdWJsaXNoZWRBdDogRGF0ZSxcbiAgaXRpbmVyYXJ5OiBbe1xuICAgIGRheTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgdGl0bGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGRlc2NyaXB0aW9uOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBhY3Rpdml0aWVzOiBbU3RyaW5nXSxcbiAgICBhY2NvbW1vZGF0aW9uOiBTdHJpbmcsXG4gICAgdHJhbnNwb3J0YXRpb246IFN0cmluZyxcbiAgICBlc3RpbWF0ZWRDb3N0OiBOdW1iZXIsXG4gIH1dLFxuICByZWxhdGVkQXR0cmFjdGlvbnM6IFt7XG4gICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgIHJlZjogJ0F0dHJhY3Rpb24nLFxuICB9XSxcbiAgc2VvOiB7XG4gICAgbWV0YVRpdGxlOiBTdHJpbmcsXG4gICAgbWV0YURlc2NyaXB0aW9uOiBTdHJpbmcsXG4gICAga2V5d29yZHM6IFtTdHJpbmddLFxuICB9LFxufSwge1xuICB0aW1lc3RhbXBzOiB0cnVlLFxufSlcblxuLy8gSW5kZXhlc1xuR3VpZGVTY2hlbWEuaW5kZXgoeyBjYXRlZ29yeTogMSB9KVxuR3VpZGVTY2hlbWEuaW5kZXgoeyBpc1B1Ymxpc2hlZDogMSB9KVxuR3VpZGVTY2hlbWEuaW5kZXgoeyBwdWJsaXNoZWRBdDogLTEgfSlcbkd1aWRlU2NoZW1hLmluZGV4KHsgdmlld3M6IC0xIH0pXG5HdWlkZVNjaGVtYS5pbmRleCh7IHRhZ3M6IDEgfSlcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLkd1aWRlIHx8IG1vbmdvb3NlLm1vZGVsPElHdWlkZT4oJ0d1aWRlJywgR3VpZGVTY2hlbWEpIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiR3VpZGVTY2hlbWEiLCJ0aXRsZSIsInR5cGUiLCJNYXAiLCJvZiIsIlN0cmluZyIsInJlcXVpcmVkIiwiY29udGVudCIsImV4Y2VycHQiLCJhdXRob3IiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiY2F0ZWdvcnkiLCJlbnVtIiwidGFncyIsImNvdmVySW1hZ2UiLCJpbWFnZXMiLCJyZWFkVGltZSIsIk51bWJlciIsInZpZXdzIiwiZGVmYXVsdCIsImxpa2VzIiwiaXNQdWJsaXNoZWQiLCJCb29sZWFuIiwicHVibGlzaGVkQXQiLCJEYXRlIiwiaXRpbmVyYXJ5IiwiZGF5IiwiZGVzY3JpcHRpb24iLCJhY3Rpdml0aWVzIiwiYWNjb21tb2RhdGlvbiIsInRyYW5zcG9ydGF0aW9uIiwiZXN0aW1hdGVkQ29zdCIsInJlbGF0ZWRBdHRyYWN0aW9ucyIsInNlbyIsIm1ldGFUaXRsZSIsIm1ldGFEZXNjcmlwdGlvbiIsImtleXdvcmRzIiwidGltZXN0YW1wcyIsImluZGV4IiwibW9kZWxzIiwiR3VpZGUiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./models/Guide.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fguides%2Froute&page=%2Fapi%2Fguides%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fguides%2Froute.ts&appDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();