"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/attractions/route";
exports.ids = ["app/api/attractions/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattractions%2Froute&page=%2Fapi%2Fattractions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattractions%2Froute.ts&appDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattractions%2Froute&page=%2Fapi%2Fattractions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattractions%2Froute.ts&appDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_luxiang_Cursor_AI_project_travel_to_china_app_api_attractions_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/attractions/route.ts */ \"(rsc)/./app/api/attractions/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/attractions/route\",\n        pathname: \"/api/attractions\",\n        filename: \"route\",\n        bundlePath: \"app/api/attractions/route\"\n    },\n    resolvedPagePath: \"/Users/luxiang/Cursor/AI-project/travel-to-china/app/api/attractions/route.ts\",\n    nextConfigOutput,\n    userland: _Users_luxiang_Cursor_AI_project_travel_to_china_app_api_attractions_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/attractions/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdHRyYWN0aW9ucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXR0cmFjdGlvbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhdHRyYWN0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmx1eGlhbmclMkZDdXJzb3IlMkZBSS1wcm9qZWN0JTJGdHJhdmVsLXRvLWNoaW5hJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmx1eGlhbmclMkZDdXJzb3IlMkZBSS1wcm9qZWN0JTJGdHJhdmVsLXRvLWNoaW5hJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM2QjtBQUMxRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3RyYXZlbC10by1jaGluYS8/NmNiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbHV4aWFuZy9DdXJzb3IvQUktcHJvamVjdC90cmF2ZWwtdG8tY2hpbmEvYXBwL2FwaS9hdHRyYWN0aW9ucy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXR0cmFjdGlvbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdHRyYWN0aW9uc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXR0cmFjdGlvbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbHV4aWFuZy9DdXJzb3IvQUktcHJvamVjdC90cmF2ZWwtdG8tY2hpbmEvYXBwL2FwaS9hdHRyYWN0aW9ucy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXR0cmFjdGlvbnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattractions%2Froute&page=%2Fapi%2Fattractions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattractions%2Froute.ts&appDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/attractions/route.ts":
/*!**************************************!*\
  !*** ./app/api/attractions/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./lib/mongodb.ts\");\n/* harmony import */ var _models_Attraction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/Attraction */ \"(rsc)/./models/Attraction.ts\");\n/* harmony import */ var _lib_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/cache */ \"(rsc)/./lib/cache.ts\");\n\n\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"12\");\n        const category = searchParams.get(\"category\");\n        const city = searchParams.get(\"city\");\n        const search = searchParams.get(\"search\");\n        const sort = searchParams.get(\"sort\") || \"rating\";\n        // Generate cache key from query parameters\n        const cacheKey = _lib_cache__WEBPACK_IMPORTED_MODULE_3__.cacheUtils.generateKey(\"attractions\", page.toString(), limit.toString(), category || \"all\", city || \"all\", search || \"none\", sort);\n        // Try to get from cache first\n        const cached = await _lib_cache__WEBPACK_IMPORTED_MODULE_3__.defaultCache.get(cacheKey);\n        if (cached) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(cached);\n        }\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        // Build query\n        const query = {\n            isActive: true\n        };\n        if (category) {\n            query.category = category;\n        }\n        if (city) {\n            query[\"location.city\"] = {\n                $regex: city,\n                $options: \"i\"\n            };\n        }\n        if (search) {\n            query.$or = [\n                {\n                    \"name.en\": {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    \"name.zh\": {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    \"description.en\": {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    \"description.zh\": {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                }\n            ];\n        }\n        // Build sort\n        let sortQuery = {};\n        switch(sort){\n            case \"rating\":\n                sortQuery = {\n                    rating: -1\n                };\n                break;\n            case \"name\":\n                sortQuery = {\n                    \"name.en\": 1\n                };\n                break;\n            case \"newest\":\n                sortQuery = {\n                    createdAt: -1\n                };\n                break;\n            default:\n                sortQuery = {\n                    rating: -1\n                };\n        }\n        const skip = (page - 1) * limit;\n        const [attractions, total] = await Promise.all([\n            _models_Attraction__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find(query).sort(sortQuery).skip(skip).limit(limit).lean(),\n            _models_Attraction__WEBPACK_IMPORTED_MODULE_2__[\"default\"].countDocuments(query)\n        ]);\n        const result = {\n            attractions,\n            pagination: {\n                page,\n                limit,\n                total,\n                pages: Math.ceil(total / limit)\n            }\n        };\n        // Cache the result for 5 minutes\n        await _lib_cache__WEBPACK_IMPORTED_MODULE_3__.defaultCache.set(cacheKey, result, 5 * 60 * 1000);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (error) {\n        console.error(\"Error fetching attractions:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        // This would typically require admin authentication\n        const data = await request.json();\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const attraction = await _models_Attraction__WEBPACK_IMPORTED_MODULE_2__[\"default\"].create(data);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(attraction, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating attraction:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUNpQjtJQUUzQixFQUFFLE9BQU9NLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBTzdDLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtZQUFFdUIsT0FBTztRQUF3QixHQUNqQztZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWVDLEtBQUsxQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0Ysb0RBQW9EO1FBQ3BELE1BQU0yQyxPQUFPLE1BQU0zQyxRQUFRZ0IsSUFBSTtRQUUvQixNQUFNckIsd0RBQVNBO1FBRWYsTUFBTWlELGFBQWEsTUFBTWhELDBEQUFVQSxDQUFDaUQsTUFBTSxDQUFDRjtRQUUzQyxPQUFPakQscURBQVlBLENBQUNzQixJQUFJLENBQUM0QixZQUFZO1lBQUVILFFBQVE7UUFBSTtJQUVyRCxFQUFFLE9BQU9GLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUMsT0FBTzdDLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtZQUFFdUIsT0FBTztRQUF3QixHQUNqQztZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RyYXZlbC10by1jaGluYS8uL2FwcC9hcGkvYXR0cmFjdGlvbnMvcm91dGUudHM/MDNlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL21vbmdvZGInXG5pbXBvcnQgQXR0cmFjdGlvbiBmcm9tICdAL21vZGVscy9BdHRyYWN0aW9uJ1xuaW1wb3J0IHsgZGVmYXVsdENhY2hlLCBjYWNoZVV0aWxzIH0gZnJvbSAnQC9saWIvY2FjaGUnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgncGFnZScpIHx8ICcxJylcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzEyJylcbiAgICBjb25zdCBjYXRlZ29yeSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2NhdGVnb3J5JylcbiAgICBjb25zdCBjaXR5ID0gc2VhcmNoUGFyYW1zLmdldCgnY2l0eScpXG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldCgnc2VhcmNoJylcbiAgICBjb25zdCBzb3J0ID0gc2VhcmNoUGFyYW1zLmdldCgnc29ydCcpIHx8ICdyYXRpbmcnXG5cbiAgICAvLyBHZW5lcmF0ZSBjYWNoZSBrZXkgZnJvbSBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgY29uc3QgY2FjaGVLZXkgPSBjYWNoZVV0aWxzLmdlbmVyYXRlS2V5KFxuICAgICAgJ2F0dHJhY3Rpb25zJyxcbiAgICAgIHBhZ2UudG9TdHJpbmcoKSxcbiAgICAgIGxpbWl0LnRvU3RyaW5nKCksXG4gICAgICBjYXRlZ29yeSB8fCAnYWxsJyxcbiAgICAgIGNpdHkgfHwgJ2FsbCcsXG4gICAgICBzZWFyY2ggfHwgJ25vbmUnLFxuICAgICAgc29ydFxuICAgIClcblxuICAgIC8vIFRyeSB0byBnZXQgZnJvbSBjYWNoZSBmaXJzdFxuICAgIGNvbnN0IGNhY2hlZCA9IGF3YWl0IGRlZmF1bHRDYWNoZS5nZXQoY2FjaGVLZXkpXG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGNhY2hlZClcbiAgICB9XG5cbiAgICBhd2FpdCBkYkNvbm5lY3QoKVxuXG4gICAgLy8gQnVpbGQgcXVlcnlcbiAgICBjb25zdCBxdWVyeTogYW55ID0geyBpc0FjdGl2ZTogdHJ1ZSB9XG4gICAgXG4gICAgaWYgKGNhdGVnb3J5KSB7XG4gICAgICBxdWVyeS5jYXRlZ29yeSA9IGNhdGVnb3J5XG4gICAgfVxuICAgIFxuICAgIGlmIChjaXR5KSB7XG4gICAgICBxdWVyeVsnbG9jYXRpb24uY2l0eSddID0geyAkcmVnZXg6IGNpdHksICRvcHRpb25zOiAnaScgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoc2VhcmNoKSB7XG4gICAgICBxdWVyeS4kb3IgPSBbXG4gICAgICAgIHsgJ25hbWUuZW4nOiB7ICRyZWdleDogc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgeyAnbmFtZS56aCc6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgICB7ICdkZXNjcmlwdGlvbi5lbic6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgICB7ICdkZXNjcmlwdGlvbi56aCc6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgXVxuICAgIH1cblxuICAgIC8vIEJ1aWxkIHNvcnRcbiAgICBsZXQgc29ydFF1ZXJ5OiBhbnkgPSB7fVxuICAgIHN3aXRjaCAoc29ydCkge1xuICAgICAgY2FzZSAncmF0aW5nJzpcbiAgICAgICAgc29ydFF1ZXJ5ID0geyByYXRpbmc6IC0xIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgICBzb3J0UXVlcnkgPSB7ICduYW1lLmVuJzogMSB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICduZXdlc3QnOlxuICAgICAgICBzb3J0UXVlcnkgPSB7IGNyZWF0ZWRBdDogLTEgfVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc29ydFF1ZXJ5ID0geyByYXRpbmc6IC0xIH1cbiAgICB9XG5cbiAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0XG5cbiAgICBjb25zdCBbYXR0cmFjdGlvbnMsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIEF0dHJhY3Rpb24uZmluZChxdWVyeSlcbiAgICAgICAgLnNvcnQoc29ydFF1ZXJ5KVxuICAgICAgICAuc2tpcChza2lwKVxuICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgIC5sZWFuKCksXG4gICAgICBBdHRyYWN0aW9uLmNvdW50RG9jdW1lbnRzKHF1ZXJ5KVxuICAgIF0pXG5cbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBhdHRyYWN0aW9ucyxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgcGFnZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHRvdGFsLFxuICAgICAgICBwYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpLFxuICAgICAgfSxcbiAgICB9XG5cbiAgICAvLyBDYWNoZSB0aGUgcmVzdWx0IGZvciA1IG1pbnV0ZXNcbiAgICBhd2FpdCBkZWZhdWx0Q2FjaGUuc2V0KGNhY2hlS2V5LCByZXN1bHQsIDUgKiA2MCAqIDEwMDApXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYXR0cmFjdGlvbnM6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIFRoaXMgd291bGQgdHlwaWNhbGx5IHJlcXVpcmUgYWRtaW4gYXV0aGVudGljYXRpb25cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBcbiAgICBhd2FpdCBkYkNvbm5lY3QoKVxuICAgIFxuICAgIGNvbnN0IGF0dHJhY3Rpb24gPSBhd2FpdCBBdHRyYWN0aW9uLmNyZWF0ZShkYXRhKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihhdHRyYWN0aW9uLCB7IHN0YXR1czogMjAxIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBhdHRyYWN0aW9uOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZGJDb25uZWN0IiwiQXR0cmFjdGlvbiIsImRlZmF1bHRDYWNoZSIsImNhY2hlVXRpbHMiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwicGFnZSIsInBhcnNlSW50IiwiZ2V0IiwibGltaXQiLCJjYXRlZ29yeSIsImNpdHkiLCJzZWFyY2giLCJzb3J0IiwiY2FjaGVLZXkiLCJnZW5lcmF0ZUtleSIsInRvU3RyaW5nIiwiY2FjaGVkIiwianNvbiIsInF1ZXJ5IiwiaXNBY3RpdmUiLCIkcmVnZXgiLCIkb3B0aW9ucyIsIiRvciIsInNvcnRRdWVyeSIsInJhdGluZyIsImNyZWF0ZWRBdCIsInNraXAiLCJhdHRyYWN0aW9ucyIsInRvdGFsIiwiUHJvbWlzZSIsImFsbCIsImZpbmQiLCJsZWFuIiwiY291bnREb2N1bWVudHMiLCJyZXN1bHQiLCJwYWdpbmF0aW9uIiwicGFnZXMiLCJNYXRoIiwiY2VpbCIsInNldCIsImVycm9yIiwiY29uc29sZSIsInN0YXR1cyIsIlBPU1QiLCJkYXRhIiwiYXR0cmFjdGlvbiIsImNyZWF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/attractions/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/cache.ts":
/*!**********************!*\
  !*** ./lib/cache.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheUtils: () => (/* binding */ cacheUtils),\n/* harmony export */   createCache: () => (/* binding */ createCache),\n/* harmony export */   defaultCache: () => (/* binding */ defaultCache)\n/* harmony export */ });\nclass MemoryCache {\n    constructor(options = {}){\n        this.cache = new Map();\n        this.maxSize = options.maxSize || 100;\n        this.defaultTTL = options.ttl || 5 * 60 * 1000; // 5 minutes default\n    }\n    set(key, value, ttl) {\n        const expiry = Date.now() + (ttl || this.defaultTTL);\n        // Remove oldest items if cache is full\n        if (this.cache.size >= this.maxSize) {\n            const oldestKey = this.cache.keys().next().value;\n            if (oldestKey) {\n                this.cache.delete(oldestKey);\n            }\n        }\n        this.cache.set(key, {\n            data: value,\n            timestamp: Date.now(),\n            expiry\n        });\n    }\n    get(key) {\n        const item = this.cache.get(key);\n        if (!item) {\n            return null;\n        }\n        // Check if item has expired\n        if (Date.now() > item.expiry) {\n            this.cache.delete(key);\n            return null;\n        }\n        return item.data;\n    }\n    has(key) {\n        const item = this.cache.get(key);\n        if (!item) return false;\n        if (Date.now() > item.expiry) {\n            this.cache.delete(key);\n            return false;\n        }\n        return true;\n    }\n    delete(key) {\n        return this.cache.delete(key);\n    }\n    clear() {\n        this.cache.clear();\n    }\n    size() {\n        // Clean expired items first\n        this.cleanExpired();\n        return this.cache.size;\n    }\n    cleanExpired() {\n        const now = Date.now();\n        const keysToDelete = [];\n        this.cache.forEach((item, key)=>{\n            if (now > item.expiry) {\n                keysToDelete.push(key);\n            }\n        });\n        keysToDelete.forEach((key)=>this.cache.delete(key));\n    }\n    // Get cache statistics\n    getStats() {\n        this.cleanExpired();\n        return {\n            size: this.cache.size,\n            maxSize: this.maxSize,\n            hitRate: 0\n        };\n    }\n}\nclass LocalStorageCache {\n    constructor(prefix = \"app_cache_\", ttl = 30 * 60 * 1000){\n        this.prefix = prefix;\n        this.defaultTTL = ttl;\n    }\n    set(key, value, ttl) {\n        try {\n            const expiry = Date.now() + (ttl || this.defaultTTL);\n            const item = {\n                data: value,\n                timestamp: Date.now(),\n                expiry\n            };\n            localStorage.setItem(this.prefix + key, JSON.stringify(item));\n        } catch (error) {\n            console.warn(\"Failed to set localStorage cache:\", error);\n        }\n    }\n    get(key) {\n        try {\n            const stored = localStorage.getItem(this.prefix + key);\n            if (!stored) return null;\n            const item = JSON.parse(stored);\n            if (Date.now() > item.expiry) {\n                localStorage.removeItem(this.prefix + key);\n                return null;\n            }\n            return item.data;\n        } catch (error) {\n            console.warn(\"Failed to get localStorage cache:\", error);\n            return null;\n        }\n    }\n    has(key) {\n        return this.get(key) !== null;\n    }\n    delete(key) {\n        try {\n            localStorage.removeItem(this.prefix + key);\n            return true;\n        } catch (error) {\n            console.warn(\"Failed to delete localStorage cache:\", error);\n            return false;\n        }\n    }\n    clear() {\n        try {\n            const keys = Object.keys(localStorage).filter((key)=>key.startsWith(this.prefix));\n            keys.forEach((key)=>localStorage.removeItem(key));\n        } catch (error) {\n            console.warn(\"Failed to clear localStorage cache:\", error);\n        }\n    }\n    // Clean expired items\n    cleanup() {\n        try {\n            const keys = Object.keys(localStorage).filter((key)=>key.startsWith(this.prefix));\n            keys.forEach((key)=>{\n                const stored = localStorage.getItem(key);\n                if (stored) {\n                    try {\n                        const item = JSON.parse(stored);\n                        if (Date.now() > item.expiry) {\n                            localStorage.removeItem(key);\n                        }\n                    } catch  {\n                        localStorage.removeItem(key); // Remove invalid items\n                    }\n                }\n            });\n        } catch (error) {\n            console.warn(\"Failed to cleanup localStorage cache:\", error);\n        }\n    }\n}\n// Multi-layer cache strategy\nclass MultiLayerCache {\n    constructor(options = {}){\n        this.memoryCache = new MemoryCache({\n            maxSize: options.maxSize || 50,\n            ttl: options.ttl || 5 * 60 * 1000 // 5 minutes for memory\n        });\n        this.storageCache = new LocalStorageCache(\"travel_cache_\", options.ttl || 30 * 60 * 1000 // 30 minutes for storage\n        );\n    }\n    async get(key) {\n        // Try memory cache first\n        let data = this.memoryCache.get(key);\n        if (data) {\n            return data;\n        }\n        // Try localStorage cache\n        data = this.storageCache.get(key);\n        if (data) {\n            // Promote to memory cache\n            this.memoryCache.set(key, data, 5 * 60 * 1000); // 5 minutes in memory\n            return data;\n        }\n        return null;\n    }\n    async set(key, value, ttl) {\n        // Set in both caches\n        this.memoryCache.set(key, value, Math.min(ttl || 5 * 60 * 1000, 5 * 60 * 1000));\n        this.storageCache.set(key, value, ttl || 30 * 60 * 1000);\n    }\n    async has(key) {\n        return this.memoryCache.has(key) || this.storageCache.has(key);\n    }\n    async delete(key) {\n        const memoryDeleted = this.memoryCache.delete(key);\n        const storageDeleted = this.storageCache.delete(key);\n        return memoryDeleted || storageDeleted;\n    }\n    async clear() {\n        this.memoryCache.clear();\n        this.storageCache.clear();\n    }\n    cleanup() {\n        this.storageCache.cleanup();\n    }\n    getStats() {\n        return {\n            memory: this.memoryCache.getStats(),\n            storage: {\n                // Would need to implement storage stats\n                size: 0,\n                hitRate: 0\n            }\n        };\n    }\n}\n// Cache factory\nfunction createCache(type = \"multi\", options = {}) {\n    switch(type){\n        case \"memory\":\n            return new MemoryCache(options);\n        case \"storage\":\n            return new LocalStorageCache(\"travel_cache_\", options.ttl);\n        case \"multi\":\n            return new MultiLayerCache(options);\n        default:\n            return new MultiLayerCache(options);\n    }\n}\n// Default cache instance\nconst defaultCache = createCache(\"multi\", {\n    ttl: 10 * 60 * 1000,\n    maxSize: 100\n});\n// Cache utilities\nconst cacheUtils = {\n    // Generate cache key from multiple parameters\n    generateKey: (...parts)=>{\n        return parts.map((part)=>String(part)).join(\":\");\n    },\n    // Cached function wrapper\n    withCache: (fn, keyGenerator, ttl)=>{\n        return async (...args)=>{\n            const key = keyGenerator(...args);\n            // Try to get from cache\n            const cached = await defaultCache.get(key);\n            if (cached !== null) {\n                return cached;\n            }\n            // Execute function and cache result\n            const result = await fn(...args);\n            await defaultCache.set(key, result, ttl);\n            return result;\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxXQUFXLENBQ1RDLElBQ0FDLGNBQ0E5RDtRQUVBLE9BQU8sT0FBTyxHQUFHK0Q7WUFDZixNQUFNN0QsTUFBTTRELGdCQUFnQkM7WUFFNUIsd0JBQXdCO1lBQ3hCLE1BQU1DLFNBQVMsTUFBTVosYUFBYXRDLEdBQUcsQ0FBQ1o7WUFDdEMsSUFBSThELFdBQVcsTUFBTTtnQkFDbkIsT0FBT0E7WUFDVDtZQUVBLG9DQUFvQztZQUNwQyxNQUFNQyxTQUFTLE1BQU1KLE1BQU1FO1lBQzNCLE1BQU1YLGFBQWFuRCxHQUFHLENBQUNDLEtBQUsrRCxRQUFRakU7WUFFcEMsT0FBT2lFO1FBQ1Q7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmF2ZWwtdG8tY2hpbmEvLi9saWIvY2FjaGUudHM/N2NiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgQ2FjaGVJdGVtPFQ+IHtcbiAgZGF0YTogVDtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGV4cGlyeTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgQ2FjaGVPcHRpb25zIHtcbiAgdHRsPzogbnVtYmVyOyAvLyBUaW1lIHRvIGxpdmUgaW4gbWlsbGlzZWNvbmRzXG4gIG1heFNpemU/OiBudW1iZXI7IC8vIE1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIGluIGNhY2hlXG59XG5cbmNsYXNzIE1lbW9yeUNhY2hlIHtcbiAgcHJpdmF0ZSBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBDYWNoZUl0ZW08YW55Pj4oKTtcbiAgcHJpdmF0ZSBtYXhTaXplOiBudW1iZXI7XG4gIHByaXZhdGUgZGVmYXVsdFRUTDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENhY2hlT3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5tYXhTaXplID0gb3B0aW9ucy5tYXhTaXplIHx8IDEwMDtcbiAgICB0aGlzLmRlZmF1bHRUVEwgPSBvcHRpb25zLnR0bCB8fCA1ICogNjAgKiAxMDAwOyAvLyA1IG1pbnV0ZXMgZGVmYXVsdFxuICB9XG5cbiAgc2V0PFQ+KGtleTogc3RyaW5nLCB2YWx1ZTogVCwgdHRsPzogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgZXhwaXJ5ID0gRGF0ZS5ub3coKSArICh0dGwgfHwgdGhpcy5kZWZhdWx0VFRMKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgb2xkZXN0IGl0ZW1zIGlmIGNhY2hlIGlzIGZ1bGxcbiAgICBpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgY29uc3Qgb2xkZXN0S2V5ID0gdGhpcy5jYWNoZS5rZXlzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgaWYgKG9sZGVzdEtleSkge1xuICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShvbGRlc3RLZXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwge1xuICAgICAgZGF0YTogdmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBleHBpcnlcbiAgICB9KTtcbiAgfVxuXG4gIGdldDxUPihrZXk6IHN0cmluZyk6IFQgfCBudWxsIHtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcbiAgICBcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGl0ZW0gaGFzIGV4cGlyZWRcbiAgICBpZiAoRGF0ZS5ub3coKSA+IGl0ZW0uZXhwaXJ5KSB7XG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW0uZGF0YSBhcyBUO1xuICB9XG5cbiAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaXRlbSA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKCFpdGVtKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgaWYgKERhdGUubm93KCkgPiBpdGVtLmV4cGlyeSkge1xuICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBkZWxldGUoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgfVxuXG4gIHNpemUoKTogbnVtYmVyIHtcbiAgICAvLyBDbGVhbiBleHBpcmVkIGl0ZW1zIGZpcnN0XG4gICAgdGhpcy5jbGVhbkV4cGlyZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5zaXplO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbkV4cGlyZWQoKTogdm9pZCB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBrZXlzVG9EZWxldGU6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgdGhpcy5jYWNoZS5mb3JFYWNoKChpdGVtLCBrZXkpID0+IHtcbiAgICAgIGlmIChub3cgPiBpdGVtLmV4cGlyeSkge1xuICAgICAgICBrZXlzVG9EZWxldGUucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGtleXNUb0RlbGV0ZS5mb3JFYWNoKGtleSA9PiB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpKTtcbiAgfVxuXG4gIC8vIEdldCBjYWNoZSBzdGF0aXN0aWNzXG4gIGdldFN0YXRzKCkge1xuICAgIHRoaXMuY2xlYW5FeHBpcmVkKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNpemU6IHRoaXMuY2FjaGUuc2l6ZSxcbiAgICAgIG1heFNpemU6IHRoaXMubWF4U2l6ZSxcbiAgICAgIGhpdFJhdGU6IDAsIC8vIFdvdWxkIG5lZWQgdG8gdHJhY2sgaGl0cy9taXNzZXMgZm9yIHJlYWwgaW1wbGVtZW50YXRpb25cbiAgICB9O1xuICB9XG59XG5cbmNsYXNzIExvY2FsU3RvcmFnZUNhY2hlIHtcbiAgcHJpdmF0ZSBwcmVmaXg6IHN0cmluZztcbiAgcHJpdmF0ZSBkZWZhdWx0VFRMOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IocHJlZml4ID0gJ2FwcF9jYWNoZV8nLCB0dGwgPSAzMCAqIDYwICogMTAwMCkgeyAvLyAzMCBtaW51dGVzIGRlZmF1bHRcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeDtcbiAgICB0aGlzLmRlZmF1bHRUVEwgPSB0dGw7XG4gIH1cblxuICBzZXQ8VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBULCB0dGw/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhwaXJ5ID0gRGF0ZS5ub3coKSArICh0dGwgfHwgdGhpcy5kZWZhdWx0VFRMKTtcbiAgICAgIGNvbnN0IGl0ZW06IENhY2hlSXRlbTxUPiA9IHtcbiAgICAgICAgZGF0YTogdmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgZXhwaXJ5XG4gICAgICB9O1xuICAgICAgXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnByZWZpeCArIGtleSwgSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzZXQgbG9jYWxTdG9yYWdlIGNhY2hlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBnZXQ8VD4oa2V5OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMucHJlZml4ICsga2V5KTtcbiAgICAgIGlmICghc3RvcmVkKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgaXRlbTogQ2FjaGVJdGVtPFQ+ID0gSlNPTi5wYXJzZShzdG9yZWQpO1xuICAgICAgXG4gICAgICBpZiAoRGF0ZS5ub3coKSA+IGl0ZW0uZXhwaXJ5KSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMucHJlZml4ICsga2V5KTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpdGVtLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGdldCBsb2NhbFN0b3JhZ2UgY2FjaGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGtleSkgIT09IG51bGw7XG4gIH1cblxuICBkZWxldGUoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5wcmVmaXggKyBrZXkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGRlbGV0ZSBsb2NhbFN0b3JhZ2UgY2FjaGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maWx0ZXIoa2V5ID0+IGtleS5zdGFydHNXaXRoKHRoaXMucHJlZml4KSk7XG4gICAgICBrZXlzLmZvckVhY2goa2V5ID0+IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBjbGVhciBsb2NhbFN0b3JhZ2UgY2FjaGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFuIGV4cGlyZWQgaXRlbXNcbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGxvY2FsU3RvcmFnZSkuZmlsdGVyKGtleSA9PiBrZXkuc3RhcnRzV2l0aCh0aGlzLnByZWZpeCkpO1xuICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgIGlmIChzdG9yZWQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IEpTT04ucGFyc2Uoc3RvcmVkKTtcbiAgICAgICAgICAgIGlmIChEYXRlLm5vdygpID4gaXRlbS5leHBpcnkpIHtcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7IC8vIFJlbW92ZSBpbnZhbGlkIGl0ZW1zXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gY2xlYW51cCBsb2NhbFN0b3JhZ2UgY2FjaGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBNdWx0aS1sYXllciBjYWNoZSBzdHJhdGVneVxuY2xhc3MgTXVsdGlMYXllckNhY2hlIHtcbiAgcHJpdmF0ZSBtZW1vcnlDYWNoZTogTWVtb3J5Q2FjaGU7XG4gIHByaXZhdGUgc3RvcmFnZUNhY2hlOiBMb2NhbFN0b3JhZ2VDYWNoZTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBDYWNoZU9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubWVtb3J5Q2FjaGUgPSBuZXcgTWVtb3J5Q2FjaGUoe1xuICAgICAgbWF4U2l6ZTogb3B0aW9ucy5tYXhTaXplIHx8IDUwLFxuICAgICAgdHRsOiBvcHRpb25zLnR0bCB8fCA1ICogNjAgKiAxMDAwIC8vIDUgbWludXRlcyBmb3IgbWVtb3J5XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5zdG9yYWdlQ2FjaGUgPSBuZXcgTG9jYWxTdG9yYWdlQ2FjaGUoXG4gICAgICAndHJhdmVsX2NhY2hlXycsXG4gICAgICBvcHRpb25zLnR0bCB8fCAzMCAqIDYwICogMTAwMCAvLyAzMCBtaW51dGVzIGZvciBzdG9yYWdlXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdldDxUPihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgICAvLyBUcnkgbWVtb3J5IGNhY2hlIGZpcnN0XG4gICAgbGV0IGRhdGEgPSB0aGlzLm1lbW9yeUNhY2hlLmdldDxUPihrZXkpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvLyBUcnkgbG9jYWxTdG9yYWdlIGNhY2hlXG4gICAgZGF0YSA9IHRoaXMuc3RvcmFnZUNhY2hlLmdldDxUPihrZXkpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAvLyBQcm9tb3RlIHRvIG1lbW9yeSBjYWNoZVxuICAgICAgdGhpcy5tZW1vcnlDYWNoZS5zZXQoa2V5LCBkYXRhLCA1ICogNjAgKiAxMDAwKTsgLy8gNSBtaW51dGVzIGluIG1lbW9yeVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBzZXQ8VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBULCB0dGw/OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBTZXQgaW4gYm90aCBjYWNoZXNcbiAgICB0aGlzLm1lbW9yeUNhY2hlLnNldChrZXksIHZhbHVlLCBNYXRoLm1pbih0dGwgfHwgNSAqIDYwICogMTAwMCwgNSAqIDYwICogMTAwMCkpO1xuICAgIHRoaXMuc3RvcmFnZUNhY2hlLnNldChrZXksIHZhbHVlLCB0dGwgfHwgMzAgKiA2MCAqIDEwMDApO1xuICB9XG5cbiAgYXN5bmMgaGFzKGtleTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMubWVtb3J5Q2FjaGUuaGFzKGtleSkgfHwgdGhpcy5zdG9yYWdlQ2FjaGUuaGFzKGtleSk7XG4gIH1cblxuICBhc3luYyBkZWxldGUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBtZW1vcnlEZWxldGVkID0gdGhpcy5tZW1vcnlDYWNoZS5kZWxldGUoa2V5KTtcbiAgICBjb25zdCBzdG9yYWdlRGVsZXRlZCA9IHRoaXMuc3RvcmFnZUNhY2hlLmRlbGV0ZShrZXkpO1xuICAgIHJldHVybiBtZW1vcnlEZWxldGVkIHx8IHN0b3JhZ2VEZWxldGVkO1xuICB9XG5cbiAgYXN5bmMgY2xlYXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5tZW1vcnlDYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuc3RvcmFnZUNhY2hlLmNsZWFyKCk7XG4gIH1cblxuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIHRoaXMuc3RvcmFnZUNhY2hlLmNsZWFudXAoKTtcbiAgfVxuXG4gIGdldFN0YXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtZW1vcnk6IHRoaXMubWVtb3J5Q2FjaGUuZ2V0U3RhdHMoKSxcbiAgICAgIHN0b3JhZ2U6IHtcbiAgICAgICAgLy8gV291bGQgbmVlZCB0byBpbXBsZW1lbnQgc3RvcmFnZSBzdGF0c1xuICAgICAgICBzaXplOiAwLFxuICAgICAgICBoaXRSYXRlOiAwXG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG4vLyBDYWNoZSBmYWN0b3J5XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FjaGUodHlwZTogJ21lbW9yeScgfCAnc3RvcmFnZScgfCAnbXVsdGknID0gJ211bHRpJywgb3B0aW9uczogQ2FjaGVPcHRpb25zID0ge30pIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnbWVtb3J5JzpcbiAgICAgIHJldHVybiBuZXcgTWVtb3J5Q2FjaGUob3B0aW9ucyk7XG4gICAgY2FzZSAnc3RvcmFnZSc6XG4gICAgICByZXR1cm4gbmV3IExvY2FsU3RvcmFnZUNhY2hlKCd0cmF2ZWxfY2FjaGVfJywgb3B0aW9ucy50dGwpO1xuICAgIGNhc2UgJ211bHRpJzpcbiAgICAgIHJldHVybiBuZXcgTXVsdGlMYXllckNhY2hlKG9wdGlvbnMpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbmV3IE11bHRpTGF5ZXJDYWNoZShvcHRpb25zKTtcbiAgfVxufVxuXG4vLyBEZWZhdWx0IGNhY2hlIGluc3RhbmNlXG5leHBvcnQgY29uc3QgZGVmYXVsdENhY2hlID0gY3JlYXRlQ2FjaGUoJ211bHRpJywge1xuICB0dGw6IDEwICogNjAgKiAxMDAwLCAvLyAxMCBtaW51dGVzXG4gIG1heFNpemU6IDEwMFxufSk7XG5cbi8vIENhY2hlIHV0aWxpdGllc1xuZXhwb3J0IGNvbnN0IGNhY2hlVXRpbHMgPSB7XG4gIC8vIEdlbmVyYXRlIGNhY2hlIGtleSBmcm9tIG11bHRpcGxlIHBhcmFtZXRlcnNcbiAgZ2VuZXJhdGVLZXk6ICguLi5wYXJ0czogKHN0cmluZyB8IG51bWJlcilbXSk6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuIHBhcnRzLm1hcChwYXJ0ID0+IFN0cmluZyhwYXJ0KSkuam9pbignOicpO1xuICB9LFxuXG4gIC8vIENhY2hlZCBmdW5jdGlvbiB3cmFwcGVyXG4gIHdpdGhDYWNoZTogPFQgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IFByb21pc2U8YW55Pj4oXG4gICAgZm46IFQsXG4gICAga2V5R2VuZXJhdG9yOiAoLi4uYXJnczogUGFyYW1ldGVyczxUPikgPT4gc3RyaW5nLFxuICAgIHR0bD86IG51bWJlclxuICApID0+IHtcbiAgICByZXR1cm4gYXN5bmMgKC4uLmFyZ3M6IFBhcmFtZXRlcnM8VD4pOiBQcm9taXNlPEF3YWl0ZWQ8UmV0dXJuVHlwZTxUPj4+ID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGtleUdlbmVyYXRvciguLi5hcmdzKTtcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCBmcm9tIGNhY2hlXG4gICAgICBjb25zdCBjYWNoZWQgPSBhd2FpdCBkZWZhdWx0Q2FjaGUuZ2V0KGtleSk7XG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQgYXMgQXdhaXRlZDxSZXR1cm5UeXBlPFQ+PjtcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSBmdW5jdGlvbiBhbmQgY2FjaGUgcmVzdWx0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbiguLi5hcmdzKTtcbiAgICAgIGF3YWl0IGRlZmF1bHRDYWNoZS5zZXQoa2V5LCByZXN1bHQsIHR0bCk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxufTsiXSwibmFtZXMiOlsiTWVtb3J5Q2FjaGUiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJjYWNoZSIsIk1hcCIsIm1heFNpemUiLCJkZWZhdWx0VFRMIiwidHRsIiwic2V0Iiwia2V5IiwidmFsdWUiLCJleHBpcnkiLCJEYXRlIiwibm93Iiwic2l6ZSIsIm9sZGVzdEtleSIsImtleXMiLCJuZXh0IiwiZGVsZXRlIiwiZGF0YSIsInRpbWVzdGFtcCIsImdldCIsIml0ZW0iLCJoYXMiLCJjbGVhciIsImNsZWFuRXhwaXJlZCIsImtleXNUb0RlbGV0ZSIsImZvckVhY2giLCJwdXNoIiwiZ2V0U3RhdHMiLCJoaXRSYXRlIiwiTG9jYWxTdG9yYWdlQ2FjaGUiLCJwcmVmaXgiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJzdG9yZWQiLCJnZXRJdGVtIiwicGFyc2UiLCJyZW1vdmVJdGVtIiwiT2JqZWN0IiwiZmlsdGVyIiwic3RhcnRzV2l0aCIsImNsZWFudXAiLCJNdWx0aUxheWVyQ2FjaGUiLCJtZW1vcnlDYWNoZSIsInN0b3JhZ2VDYWNoZSIsIk1hdGgiLCJtaW4iLCJtZW1vcnlEZWxldGVkIiwic3RvcmFnZURlbGV0ZWQiLCJtZW1vcnkiLCJzdG9yYWdlIiwiY3JlYXRlQ2FjaGUiLCJ0eXBlIiwiZGVmYXVsdENhY2hlIiwiY2FjaGVVdGlscyIsImdlbmVyYXRlS2V5IiwicGFydHMiLCJtYXAiLCJwYXJ0IiwiU3RyaW5nIiwiam9pbiIsIndpdGhDYWNoZSIsImZuIiwia2V5R2VuZXJhdG9yIiwiYXJncyIsImNhY2hlZCIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/cache.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0I7QUFFL0IsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQSxJQUFJQyxTQUFTQyxPQUFPTixRQUFRO0FBRTVCLElBQUksQ0FBQ0ssUUFBUTtJQUNYQSxTQUFTQyxPQUFPTixRQUFRLEdBQUc7UUFBRU8sTUFBTTtRQUFNQyxTQUFTO0lBQUs7QUFDekQ7QUFFQSxlQUFlQztJQUNiLElBQUlKLE9BQU9FLElBQUksRUFBRTtRQUNmLE9BQU9GLE9BQU9FLElBQUk7SUFDcEI7SUFFQSxJQUFJLENBQUNGLE9BQU9HLE9BQU8sRUFBRTtRQUNuQixNQUFNRSxPQUFPO1lBQ1hDLGdCQUFnQjtRQUNsQjtRQUVBTixPQUFPRyxPQUFPLEdBQUdSLHVEQUFnQixDQUFDQyxhQUFhUyxNQUFNRyxJQUFJLENBQUMsQ0FBQ2I7WUFDekQsT0FBT0E7UUFDVDtJQUNGO0lBRUEsSUFBSTtRQUNGSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNwQyxFQUFFLE9BQU9NLEdBQUc7UUFDVlQsT0FBT0csT0FBTyxHQUFHO1FBQ2pCLE1BQU1NO0lBQ1I7SUFFQSxPQUFPVCxPQUFPRSxJQUFJO0FBQ3BCO0FBRUEsaUVBQWVFLFNBQVNBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmF2ZWwtdG8tY2hpbmEvLi9saWIvbW9uZ29kYi50cz8wNWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSdcblxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSSFcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJylcbn1cblxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZVxuXG5pZiAoIWNhY2hlZCkge1xuICBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgPSB7IGNvbm46IG51bGwsIHByb21pc2U6IG51bGwgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ublxuICB9XG5cbiAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICBidWZmZXJDb21tYW5kczogZmFsc2UsXG4gICAgfVxuXG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xuICAgICAgcmV0dXJuIG1vbmdvb3NlXG4gICAgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZVxuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsXG4gICAgdGhyb3cgZVxuICB9XG5cbiAgcmV0dXJuIGNhY2hlZC5jb25uXG59XG5cbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdCJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJjb25uZWN0IiwidGhlbiIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./models/Attraction.ts":
/*!******************************!*\
  !*** ./models/Attraction.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst AttractionSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: Map,\n        of: String,\n        required: true\n    },\n    description: {\n        type: Map,\n        of: String,\n        required: true\n    },\n    location: {\n        city: {\n            type: String,\n            required: true\n        },\n        province: {\n            type: String,\n            required: true\n        },\n        coordinates: {\n            lat: {\n                type: Number,\n                required: true\n            },\n            lng: {\n                type: Number,\n                required: true\n            }\n        }\n    },\n    images: [\n        {\n            type: String,\n            required: true\n        }\n    ],\n    category: {\n        type: String,\n        enum: [\n            \"historical\",\n            \"natural\",\n            \"cultural\",\n            \"modern\",\n            \"religious\"\n        ],\n        required: true\n    },\n    rating: {\n        type: Number,\n        min: 0,\n        max: 5,\n        default: 0\n    },\n    reviewCount: {\n        type: Number,\n        default: 0\n    },\n    highlights: [\n        String\n    ],\n    ticketPrice: {\n        adult: {\n            type: Number,\n            required: true\n        },\n        child: {\n            type: Number,\n            required: true\n        },\n        currency: {\n            type: String,\n            default: \"CNY\"\n        }\n    },\n    duration: {\n        type: String,\n        required: true\n    },\n    bestTimeToVisit: [\n        String\n    ],\n    openingHours: {\n        open: {\n            type: String,\n            required: true\n        },\n        close: {\n            type: String,\n            required: true\n        },\n        note: String\n    },\n    contact: {\n        phone: String,\n        website: String,\n        email: String\n    },\n    isActive: {\n        type: Boolean,\n        default: true\n    }\n}, {\n    timestamps: true\n});\n// Indexes for better performance\nAttractionSchema.index({\n    \"location.city\": 1\n});\nAttractionSchema.index({\n    category: 1\n});\nAttractionSchema.index({\n    rating: -1\n});\nAttractionSchema.index({\n    \"location.coordinates\": \"2dsphere\"\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Attraction || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Attraction\", AttractionSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvQXR0cmFjdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUF3Q3JELE1BQU1FLG1CQUFtQixJQUFJRCw0Q0FBTUEsQ0FBYztJQUMvQ0UsTUFBTTtRQUNKQyxNQUFNQztRQUNOQyxJQUFJQztRQUNKQyxVQUFVO0lBQ1o7SUFDQUMsYUFBYTtRQUNYTCxNQUFNQztRQUNOQyxJQUFJQztRQUNKQyxVQUFVO0lBQ1o7SUFDQUUsVUFBVTtRQUNSQyxNQUFNO1lBQUVQLE1BQU1HO1lBQVFDLFVBQVU7UUFBSztRQUNyQ0ksVUFBVTtZQUFFUixNQUFNRztZQUFRQyxVQUFVO1FBQUs7UUFDekNLLGFBQWE7WUFDWEMsS0FBSztnQkFBRVYsTUFBTVc7Z0JBQVFQLFVBQVU7WUFBSztZQUNwQ1EsS0FBSztnQkFBRVosTUFBTVc7Z0JBQVFQLFVBQVU7WUFBSztRQUN0QztJQUNGO0lBQ0FTLFFBQVE7UUFBQztZQUFFYixNQUFNRztZQUFRQyxVQUFVO1FBQUs7S0FBRTtJQUMxQ1UsVUFBVTtRQUNSZCxNQUFNRztRQUNOWSxNQUFNO1lBQUM7WUFBYztZQUFXO1lBQVk7WUFBVTtTQUFZO1FBQ2xFWCxVQUFVO0lBQ1o7SUFDQVksUUFBUTtRQUNOaEIsTUFBTVc7UUFDTk0sS0FBSztRQUNMQyxLQUFLO1FBQ0xDLFNBQVM7SUFDWDtJQUNBQyxhQUFhO1FBQ1hwQixNQUFNVztRQUNOUSxTQUFTO0lBQ1g7SUFDQUUsWUFBWTtRQUFDbEI7S0FBTztJQUNwQm1CLGFBQWE7UUFDWEMsT0FBTztZQUFFdkIsTUFBTVc7WUFBUVAsVUFBVTtRQUFLO1FBQ3RDb0IsT0FBTztZQUFFeEIsTUFBTVc7WUFBUVAsVUFBVTtRQUFLO1FBQ3RDcUIsVUFBVTtZQUFFekIsTUFBTUc7WUFBUWdCLFNBQVM7UUFBTTtJQUMzQztJQUNBTyxVQUFVO1FBQ1IxQixNQUFNRztRQUNOQyxVQUFVO0lBQ1o7SUFDQXVCLGlCQUFpQjtRQUFDeEI7S0FBTztJQUN6QnlCLGNBQWM7UUFDWkMsTUFBTTtZQUFFN0IsTUFBTUc7WUFBUUMsVUFBVTtRQUFLO1FBQ3JDMEIsT0FBTztZQUFFOUIsTUFBTUc7WUFBUUMsVUFBVTtRQUFLO1FBQ3RDMkIsTUFBTTVCO0lBQ1I7SUFDQTZCLFNBQVM7UUFDUEMsT0FBTzlCO1FBQ1ArQixTQUFTL0I7UUFDVGdDLE9BQU9oQztJQUNUO0lBQ0FpQyxVQUFVO1FBQ1JwQyxNQUFNcUM7UUFDTmxCLFNBQVM7SUFDWDtBQUNGLEdBQUc7SUFDRG1CLFlBQVk7QUFDZDtBQUVBLGlDQUFpQztBQUNqQ3hDLGlCQUFpQnlDLEtBQUssQ0FBQztJQUFFLGlCQUFpQjtBQUFFO0FBQzVDekMsaUJBQWlCeUMsS0FBSyxDQUFDO0lBQUV6QixVQUFVO0FBQUU7QUFDckNoQixpQkFBaUJ5QyxLQUFLLENBQUM7SUFBRXZCLFFBQVEsQ0FBQztBQUFFO0FBQ3BDbEIsaUJBQWlCeUMsS0FBSyxDQUFDO0lBQUUsd0JBQXdCO0FBQVc7QUFFNUQsaUVBQWUzQyx3REFBZSxDQUFDNkMsVUFBVSxJQUFJN0MscURBQWMsQ0FBYyxjQUFjRSxpQkFBaUJBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmF2ZWwtdG8tY2hpbmEvLi9tb2RlbHMvQXR0cmFjdGlvbi50cz9iYWFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBEb2N1bWVudCwgU2NoZW1hIH0gZnJvbSAnbW9uZ29vc2UnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSUF0dHJhY3Rpb24gZXh0ZW5kcyBEb2N1bWVudCB7XG4gIG5hbWU6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gLy8gTXVsdGktbGFuZ3VhZ2Ugc3VwcG9ydFxuICBkZXNjcmlwdGlvbjogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICBsb2NhdGlvbjoge1xuICAgIGNpdHk6IHN0cmluZ1xuICAgIHByb3ZpbmNlOiBzdHJpbmdcbiAgICBjb29yZGluYXRlczoge1xuICAgICAgbGF0OiBudW1iZXJcbiAgICAgIGxuZzogbnVtYmVyXG4gICAgfVxuICB9XG4gIGltYWdlczogc3RyaW5nW11cbiAgY2F0ZWdvcnk6ICdoaXN0b3JpY2FsJyB8ICduYXR1cmFsJyB8ICdjdWx0dXJhbCcgfCAnbW9kZXJuJyB8ICdyZWxpZ2lvdXMnXG4gIHJhdGluZzogbnVtYmVyXG4gIHJldmlld0NvdW50OiBudW1iZXJcbiAgaGlnaGxpZ2h0czogc3RyaW5nW11cbiAgdGlja2V0UHJpY2U6IHtcbiAgICBhZHVsdDogbnVtYmVyXG4gICAgY2hpbGQ6IG51bWJlclxuICAgIGN1cnJlbmN5OiBzdHJpbmdcbiAgfVxuICBkdXJhdGlvbjogc3RyaW5nIC8vIGUuZy4sIFwiMi0zIGhvdXJzXCJcbiAgYmVzdFRpbWVUb1Zpc2l0OiBzdHJpbmdbXVxuICBvcGVuaW5nSG91cnM6IHtcbiAgICBvcGVuOiBzdHJpbmdcbiAgICBjbG9zZTogc3RyaW5nXG4gICAgbm90ZT86IHN0cmluZ1xuICB9XG4gIGNvbnRhY3Q6IHtcbiAgICBwaG9uZT86IHN0cmluZ1xuICAgIHdlYnNpdGU/OiBzdHJpbmdcbiAgICBlbWFpbD86IHN0cmluZ1xuICB9XG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIGNyZWF0ZWRBdDogRGF0ZVxuICB1cGRhdGVkQXQ6IERhdGVcbn1cblxuY29uc3QgQXR0cmFjdGlvblNjaGVtYSA9IG5ldyBTY2hlbWE8SUF0dHJhY3Rpb24+KHtcbiAgbmFtZToge1xuICAgIHR5cGU6IE1hcCxcbiAgICBvZjogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBkZXNjcmlwdGlvbjoge1xuICAgIHR5cGU6IE1hcCxcbiAgICBvZjogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBsb2NhdGlvbjoge1xuICAgIGNpdHk6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHByb3ZpbmNlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjb29yZGluYXRlczoge1xuICAgICAgbGF0OiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIGxuZzogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgfVxuICB9LFxuICBpbWFnZXM6IFt7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfV0sXG4gIGNhdGVnb3J5OiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IFsnaGlzdG9yaWNhbCcsICduYXR1cmFsJywgJ2N1bHR1cmFsJywgJ21vZGVybicsICdyZWxpZ2lvdXMnXSxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgcmF0aW5nOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIG1pbjogMCxcbiAgICBtYXg6IDUsXG4gICAgZGVmYXVsdDogMCxcbiAgfSxcbiAgcmV2aWV3Q291bnQ6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMCxcbiAgfSxcbiAgaGlnaGxpZ2h0czogW1N0cmluZ10sXG4gIHRpY2tldFByaWNlOiB7XG4gICAgYWR1bHQ6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGNoaWxkOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjdXJyZW5jeTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdDTlknIH0sXG4gIH0sXG4gIGR1cmF0aW9uOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBiZXN0VGltZVRvVmlzaXQ6IFtTdHJpbmddLFxuICBvcGVuaW5nSG91cnM6IHtcbiAgICBvcGVuOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjbG9zZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgbm90ZTogU3RyaW5nLFxuICB9LFxuICBjb250YWN0OiB7XG4gICAgcGhvbmU6IFN0cmluZyxcbiAgICB3ZWJzaXRlOiBTdHJpbmcsXG4gICAgZW1haWw6IFN0cmluZyxcbiAgfSxcbiAgaXNBY3RpdmU6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gIH0sXG59LCB7XG4gIHRpbWVzdGFtcHM6IHRydWUsXG59KVxuXG4vLyBJbmRleGVzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbkF0dHJhY3Rpb25TY2hlbWEuaW5kZXgoeyAnbG9jYXRpb24uY2l0eSc6IDEgfSlcbkF0dHJhY3Rpb25TY2hlbWEuaW5kZXgoeyBjYXRlZ29yeTogMSB9KVxuQXR0cmFjdGlvblNjaGVtYS5pbmRleCh7IHJhdGluZzogLTEgfSlcbkF0dHJhY3Rpb25TY2hlbWEuaW5kZXgoeyAnbG9jYXRpb24uY29vcmRpbmF0ZXMnOiAnMmRzcGhlcmUnIH0pXG5cbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5BdHRyYWN0aW9uIHx8IG1vbmdvb3NlLm1vZGVsPElBdHRyYWN0aW9uPignQXR0cmFjdGlvbicsIEF0dHJhY3Rpb25TY2hlbWEpIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiQXR0cmFjdGlvblNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiTWFwIiwib2YiLCJTdHJpbmciLCJyZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwibG9jYXRpb24iLCJjaXR5IiwicHJvdmluY2UiLCJjb29yZGluYXRlcyIsImxhdCIsIk51bWJlciIsImxuZyIsImltYWdlcyIsImNhdGVnb3J5IiwiZW51bSIsInJhdGluZyIsIm1pbiIsIm1heCIsImRlZmF1bHQiLCJyZXZpZXdDb3VudCIsImhpZ2hsaWdodHMiLCJ0aWNrZXRQcmljZSIsImFkdWx0IiwiY2hpbGQiLCJjdXJyZW5jeSIsImR1cmF0aW9uIiwiYmVzdFRpbWVUb1Zpc2l0Iiwib3BlbmluZ0hvdXJzIiwib3BlbiIsImNsb3NlIiwibm90ZSIsImNvbnRhY3QiLCJwaG9uZSIsIndlYnNpdGUiLCJlbWFpbCIsImlzQWN0aXZlIiwiQm9vbGVhbiIsInRpbWVzdGFtcHMiLCJpbmRleCIsIm1vZGVscyIsIkF0dHJhY3Rpb24iLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./models/Attraction.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattractions%2Froute&page=%2Fapi%2Fattractions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattractions%2Froute.ts&appDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fluxiang%2FCursor%2FAI-project%2Ftravel-to-china&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();